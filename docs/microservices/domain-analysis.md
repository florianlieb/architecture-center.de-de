---
title: Domänenanalyse für Microservices
description: Domänenanalyse für Microservices
author: MikeWasson
ms.date: 12/08/2017
ms.openlocfilehash: c3c353a6b30507369357af4b520a51f8afc2fb8d
ms.sourcegitcommit: 3d6dba524cc7661740bdbaf43870de7728d60a01
ms.translationtype: HT
ms.contentlocale: de-DE
ms.lasthandoff: 01/11/2018
---
# <a name="designing-microservices-domain-analysis"></a><span data-ttu-id="0ad30-103">Entwerfen von Microservices: Domänenanalyse</span><span class="sxs-lookup"><span data-stu-id="0ad30-103">Designing microservices: Domain analysis</span></span> 

<span data-ttu-id="0ad30-104">Eine der größten Herausforderungen in Bezug auf Microservices besteht darin, die Grenzen der einzelnen Dienste zu definieren.</span><span class="sxs-lookup"><span data-stu-id="0ad30-104">One of the biggest challenges of microservices is to define the boundaries of individual services.</span></span> <span data-ttu-id="0ad30-105">Eine allgemeine Regel besagt, dass ein Dienst nur einem Zweck dienen soll. Die Umsetzung dieser Regel in die Praxis bedarf jedoch sorgfältiger Überlegung.</span><span class="sxs-lookup"><span data-stu-id="0ad30-105">The general rule is that a service should do "one thing" &mdash; but putting that rule into practice requires careful thought.</span></span> <span data-ttu-id="0ad30-106">Es gibt keinen mechanischen Prozess, mit dem das „richtige“ Design erzielt werden kann.</span><span class="sxs-lookup"><span data-stu-id="0ad30-106">There is no mechanical process that will produce the "right" design.</span></span> <span data-ttu-id="0ad30-107">Es ist erforderlich, dass Sie sich eingehend mit Ihrer Geschäftsdomäne und den dazugehörigen Anforderungen und Zielen beschäftigen.</span><span class="sxs-lookup"><span data-stu-id="0ad30-107">You have to think deeply about your business domain, requirements, and goals.</span></span> <span data-ttu-id="0ad30-108">Andernfalls erhalten Sie unter Umständen ein planloses Design mit einigen unerwünschten Merkmalen, z.B. versteckten Abhängigkeiten zwischen Diensten, zu enger Kopplung oder schlecht entworfenen Schnittstellen.</span><span class="sxs-lookup"><span data-stu-id="0ad30-108">Otherwise, you can end up with a haphazard design that exhibits some undesirable characteristics, such as hidden dependencies between services, tight coupling, or poorly designed interfaces.</span></span> <span data-ttu-id="0ad30-109">In diesem Kapitel verwenden wir einen am Geschäftsbereich ausgerichteten Ansatz für den Entwurf von Microservices.</span><span class="sxs-lookup"><span data-stu-id="0ad30-109">In this chapter, we take a domain-driven approach to designing microservices.</span></span> 

<span data-ttu-id="0ad30-110">Microservices sollten basierend auf den geschäftlichen Funktionen entworfen werden, nicht auf horizontalen Ebenen wie dem Datenzugriff oder Messaging.</span><span class="sxs-lookup"><span data-stu-id="0ad30-110">Microservices should be designed around business capabilities, not horizontal layers such as data access or messaging.</span></span> <span data-ttu-id="0ad30-111">Außerdem sollten sie eine lose Kopplung und eine hohe funktionsbezogene Kohäsion aufweisen.</span><span class="sxs-lookup"><span data-stu-id="0ad30-111">In addition, they should have loose coupling and high functional cohesion.</span></span> <span data-ttu-id="0ad30-112">Microservices sind *lose gekoppelt*, wenn Sie einen Dienst ändern können, ohne dass gleichzeitig andere Dienste aktualisiert werden müssen.</span><span class="sxs-lookup"><span data-stu-id="0ad30-112">Microservices are *loosely coupled* if you can change one service without requiring other services to be updated at the same time.</span></span> <span data-ttu-id="0ad30-113">Ein Microservice ist *kohäsiv*, wenn er einem einzelnen, klar definierten Zweck dient, z.B. der Verwaltung von Benutzerkonten oder der Nachverfolgung des Lieferverlaufs.</span><span class="sxs-lookup"><span data-stu-id="0ad30-113">A microservice is *cohesive* if it has a single, well-defined purpose, such as managing user accounts or tracking delivery history.</span></span> <span data-ttu-id="0ad30-114">Ein Dienst sollte das Wissen des Geschäftsbereichs umfassen und dieses Wissen von den Clients abstrahieren.</span><span class="sxs-lookup"><span data-stu-id="0ad30-114">A service should encapsulate domain knowledge and abstract that knowledge from clients.</span></span> <span data-ttu-id="0ad30-115">Ein Client sollte beispielsweise dazu in der Lage sein, eine Drohne zu planen, ohne die Details des Planungsalgorithmus oder der Drohnenflottenverwaltung zu kennen.</span><span class="sxs-lookup"><span data-stu-id="0ad30-115">For example, a client should be able to schedule a drone without knowing the details of the scheduling algorithm or how the drone fleet is managed.</span></span>

<span data-ttu-id="0ad30-116">Bei dem am Geschäftsbereich ausgerichteten Entwurf (Domain-Driven Design, DDD) wird ein Framework bereitgestellt, mit dem Sie die meisten Voraussetzungen auf dem Weg zu einem guten Entwurf der Microservices bereits erfüllen können.</span><span class="sxs-lookup"><span data-stu-id="0ad30-116">Domain-driven design (DDD) provides a framework that can get you most of the way to a set of well-designed microservices.</span></span> <span data-ttu-id="0ad30-117">DDD verfügt über zwei separate Phasen: eine strategische und eine taktische Phase.</span><span class="sxs-lookup"><span data-stu-id="0ad30-117">DDD has two distinct phases, strategic and tactical.</span></span> <span data-ttu-id="0ad30-118">In der strategischen DDD-Phase definieren Sie die übergeordnete Struktur des Systems.</span><span class="sxs-lookup"><span data-stu-id="0ad30-118">In strategic DDD, you are defining the large-scale structure of the system.</span></span> <span data-ttu-id="0ad30-119">In dieser Phase können Sie sicherstellen, dass Ihre Architektur klar auf die geschäftlichen Funktionen ausgerichtet ist.</span><span class="sxs-lookup"><span data-stu-id="0ad30-119">Strategic DDD helps to ensure that your architecture remains focused on business capabilities.</span></span> <span data-ttu-id="0ad30-120">In der taktischen DDD-Phase wird eine Gruppe von Entwurfsmustern bereitgestellt, die Sie zum Erstellen des Domänenmodells verwenden können.</span><span class="sxs-lookup"><span data-stu-id="0ad30-120">Tactical DDD provides a set of design patterns that you can use to create the domain model.</span></span> <span data-ttu-id="0ad30-121">Zu diesen Mustern gehören Entitäten, Aggregate und Domänendienste.</span><span class="sxs-lookup"><span data-stu-id="0ad30-121">These patterns include entities, aggregates, and domain services.</span></span> <span data-ttu-id="0ad30-122">Diese taktischen Muster sind hilfreich beim Entwerfen von Microservices, die sowohl lose gekoppelt als auch kohäsiv sind.</span><span class="sxs-lookup"><span data-stu-id="0ad30-122">These tactical patterns will help you to design microservices that are both loosely coupled and cohesive.</span></span>

![](./images/ddd-process.png)

<span data-ttu-id="0ad30-123">In diesem und im nächsten Kapitel werden die folgenden Schritte beschrieben und auf die Anwendung für die Drohnenlieferung (Drone Delivery) angewendet:</span><span class="sxs-lookup"><span data-stu-id="0ad30-123">In this chapter and the next, we'll walk through the following steps, applying them to the Drone Delivery application:</span></span> 

1. <span data-ttu-id="0ad30-124">Zunächst analysieren wir die Geschäftsdomäne, um die funktionsbezogenen Anforderungen der Anwendung zu verstehen.</span><span class="sxs-lookup"><span data-stu-id="0ad30-124">Start by analyzing the business domain to understand the application's functional requirements.</span></span> <span data-ttu-id="0ad30-125">Das Ergebnis dieses Schritts ist eine informelle Beschreibung des Geschäftsbereichs, die zu einer formelleren Gruppe von Domänenmodellen verfeinert werden kann.</span><span class="sxs-lookup"><span data-stu-id="0ad30-125">The output of this step is an informal description of the domain, which can be refined into a more formal set of domain models.</span></span> 

2. <span data-ttu-id="0ad30-126">Als Nächstes definieren wir die *Kontextgrenzen* der Domäne.</span><span class="sxs-lookup"><span data-stu-id="0ad30-126">Next, define the *bounded contexts* of the domain.</span></span> <span data-ttu-id="0ad30-127">Jeder Kontextgrenzenbereich enthält ein Domänenmodell, das eine bestimmte Unterdomäne der übergeordneten Anwendung darstellt.</span><span class="sxs-lookup"><span data-stu-id="0ad30-127">Each bounded context contains a domain model that represents a particular subdomain of the larger application.</span></span> 

3. <span data-ttu-id="0ad30-128">Wenden Sie innerhalb einer Kontextgrenze taktische DDD-Muster an, um Entitäten, Aggregate und Domänendienste zu definieren.</span><span class="sxs-lookup"><span data-stu-id="0ad30-128">Within a bounded context, apply tactical DDD patterns to define entities, aggregates, and domain services.</span></span> 
 
4. <span data-ttu-id="0ad30-129">Verwenden Sie die Ergebnisse des vorherigen Schritts, um die Microservices Ihrer Anwendung zu identifizieren.</span><span class="sxs-lookup"><span data-stu-id="0ad30-129">Use the results from the previous step to identify the microservices in your application.</span></span>

<span data-ttu-id="0ad30-130">In diesem Kapitel werden die ersten drei Schritte behandelt, in denen es hauptsächlich um DDD geht.</span><span class="sxs-lookup"><span data-stu-id="0ad30-130">In this chapter, we cover the first three steps, which are primarily concerned with DDD.</span></span> <span data-ttu-id="0ad30-131">Im nächsten Kapitel identifizieren wir dann die Microservices.</span><span class="sxs-lookup"><span data-stu-id="0ad30-131">In the next chapter, we will identify the microservices.</span></span> <span data-ttu-id="0ad30-132">Hierbei sollte aber unbedingt beachtet werden, dass DDD ein iterativer, fortlaufender Prozess ist.</span><span class="sxs-lookup"><span data-stu-id="0ad30-132">However, it's important to remember that DDD is an iterative, ongoing process.</span></span> <span data-ttu-id="0ad30-133">Dienstgrenzen sind nicht in Stein gemeißelt.</span><span class="sxs-lookup"><span data-stu-id="0ad30-133">Service boundaries aren't fixed in stone.</span></span> <span data-ttu-id="0ad30-134">Wenn sich eine Anwendung weiterentwickelt, treffen Sie unter Umständen die Entscheidung, dass ein Dienst in mehrere kleinere Dienste unterteilt werden soll.</span><span class="sxs-lookup"><span data-stu-id="0ad30-134">As an application evolves, you may decide to break apart a service into several smaller services.</span></span>

> [!NOTE]
> <span data-ttu-id="0ad30-135">In diesem Kapitel soll keine vollständige und umfassende Domänenanalyse bereitgestellt werden.</span><span class="sxs-lookup"><span data-stu-id="0ad30-135">This chapter is not meant to show a complete and comprehensive domain analysis.</span></span> <span data-ttu-id="0ad30-136">Wir haben das Beispiel absichtlich kurz gehalten, um die wichtigsten Punkte besser verdeutlichen zu können.</span><span class="sxs-lookup"><span data-stu-id="0ad30-136">We deliberately kept the example brief, in order to illustrate the main points.</span></span> <span data-ttu-id="0ad30-137">Weitere Hintergrundinformationen zu DDD finden Sie im Buch *Domain-Driven Design* von Eric Evans, in dem dieser Begriff zuerst verwendet wurde.</span><span class="sxs-lookup"><span data-stu-id="0ad30-137">For more background on DDD, we recommend Eric Evans' *Domain-Driven Design*, the book that first introduced the term.</span></span> <span data-ttu-id="0ad30-138">Eine andere gute Quelle ist *Implementing Domain-Driven Design* von Vaughn Vernon.</span><span class="sxs-lookup"><span data-stu-id="0ad30-138">Another good reference is *Implementing Domain-Driven Design* by Vaughn Vernon.</span></span> 

## <a name="analyze-the-domain"></a><span data-ttu-id="0ad30-139">Analysieren der Domäne</span><span class="sxs-lookup"><span data-stu-id="0ad30-139">Analyze the domain</span></span>

<span data-ttu-id="0ad30-140">Bei der Nutzung eines DDD-Ansatzes können Sie Microservices so entwerfen, dass jeder Dienst auf natürliche Weise zu einer funktionsbezogenen Geschäftsanforderung passt.</span><span class="sxs-lookup"><span data-stu-id="0ad30-140">Using a DDD approach will help you to design microservices so that every service forms a natural fit to a functional business requirement.</span></span> <span data-ttu-id="0ad30-141">Auf diese Weise können Sie es vermeiden, dass Ihr Entwurf durch organisatorische Grenzen oder die ausgewählte Technologie bestimmt wird.</span><span class="sxs-lookup"><span data-stu-id="0ad30-141">It can help you to avoid the trap of letting organizational boundaries or technology choices dictate your design.</span></span>

<span data-ttu-id="0ad30-142">Bevor Sie Code schreiben, müssen Sie sich einen allgemeinen Überblick über das zu erstellende System verschaffen.</span><span class="sxs-lookup"><span data-stu-id="0ad30-142">Before writing any code, you need a bird's eye view of the system that you are creating.</span></span> <span data-ttu-id="0ad30-143">Beim DDD-Ansatz wird zuerst die Geschäftsdomäne modelliert und ein *Domänenmodell* erstellt.</span><span class="sxs-lookup"><span data-stu-id="0ad30-143">DDD starts by modeling the business domain and creating a *domain model*.</span></span> <span data-ttu-id="0ad30-144">Das Domänenmodell ist ein abstraktes Modell der Geschäftsdomäne.</span><span class="sxs-lookup"><span data-stu-id="0ad30-144">The domain model is an abstract model of the business domain.</span></span> <span data-ttu-id="0ad30-145">Hiermit wird das Domänenwissen zusammengefasst und organisiert und eine gemeinsame Sprache für Entwickler und Domänenexperten gefunden.</span><span class="sxs-lookup"><span data-stu-id="0ad30-145">It distills and organizes domain knowledge, and provides a common language for developers and domain experts.</span></span> 

<span data-ttu-id="0ad30-146">Beginnen Sie, indem Sie alle Geschäftsfunktionen und ihre Verbindungen zuordnen.</span><span class="sxs-lookup"><span data-stu-id="0ad30-146">Start by mapping all of the business functions and their connections.</span></span> <span data-ttu-id="0ad30-147">Dies ist normalerweise ein Vorgang, der von Domänenexperten, Softwarearchitekten und anderen Projektbeteiligten gemeinsam durchgeführt wird.</span><span class="sxs-lookup"><span data-stu-id="0ad30-147">This will likely be a collaborative effort that involves domain experts, software architects, and other stakeholders.</span></span> <span data-ttu-id="0ad30-148">Es muss kein bestimmter Formalismus eingehalten werden.</span><span class="sxs-lookup"><span data-stu-id="0ad30-148">You don't need to use any particular formalism.</span></span>  <span data-ttu-id="0ad30-149">Skizzieren Sie ein Diagramm, oder verwenden Sie ein Whiteboard.</span><span class="sxs-lookup"><span data-stu-id="0ad30-149">Sketch a diagram or draw on whiteboard.</span></span>

<span data-ttu-id="0ad30-150">Beim Erstellen des Diagramms können Sie damit beginnen, einzelne Unterdomänen zu identifizieren.</span><span class="sxs-lookup"><span data-stu-id="0ad30-150">As you fill in the diagram, you may start to identify discrete subdomains.</span></span> <span data-ttu-id="0ad30-151">Welche Funktionen sind eng verwandt?</span><span class="sxs-lookup"><span data-stu-id="0ad30-151">Which functions are closely related?</span></span> <span data-ttu-id="0ad30-152">Welche Funktionen sind für das Geschäft besonders wichtig, und welche Funktionen erfüllen Hilfszwecke?</span><span class="sxs-lookup"><span data-stu-id="0ad30-152">Which functions are core to the business, and which provide ancillary services?</span></span> <span data-ttu-id="0ad30-153">Was ist das Abhängigkeitsdiagramm?</span><span class="sxs-lookup"><span data-stu-id="0ad30-153">What is the dependency graph?</span></span> <span data-ttu-id="0ad30-154">Während dieser ersten Phase geht es nicht um Technologien oder Implementierungsdetails.</span><span class="sxs-lookup"><span data-stu-id="0ad30-154">During this initial phase, you aren't concerned with technologies or implementation details.</span></span> <span data-ttu-id="0ad30-155">Sie sollten sich aber darüber bewusst sein, an welchen Stellen die Anwendung in externe Systeme integriert werden muss, z.B. Systeme für CRM, Zahlungsverarbeitung oder Abrechnung.</span><span class="sxs-lookup"><span data-stu-id="0ad30-155">That said, you should note the place where the application will need to integrate with external systems, such as CRM, payment processing, or billing systems.</span></span> 

## <a name="drone-delivery-analyzing-the-business-domain"></a><span data-ttu-id="0ad30-156">Drohnenlieferung: Analysieren der Geschäftsdomäne</span><span class="sxs-lookup"><span data-stu-id="0ad30-156">Drone Delivery: Analyzing the business domain.</span></span>

<span data-ttu-id="0ad30-157">Nach der ersten Domänenanalyse hat das Fabrikam-Team eine grobe Skizze erstellt, in der die Domäne der Drohnenlieferung dargestellt ist.</span><span class="sxs-lookup"><span data-stu-id="0ad30-157">After some initial domain analysis, the Fabrikam team came up with a rough sketch that depicts the Drone Delivery domain.</span></span>

![](./images/ddd1.svg) 

- <span data-ttu-id="0ad30-158">**Lieferung** ist in der Mitte des Diagramms angeordnet, weil dies der Kern des Geschäfts ist.</span><span class="sxs-lookup"><span data-stu-id="0ad30-158">**Shipping** is placed in the center of the diagram, because it's core to the business.</span></span> <span data-ttu-id="0ad30-159">Alle anderen Elemente des Diagramms dienen der Ermöglichung dieser Funktionalität.</span><span class="sxs-lookup"><span data-stu-id="0ad30-159">Everything else in the diagram exists to enable this functionality.</span></span>
- <span data-ttu-id="0ad30-160">Die **Drohnenverwaltung** ist auch ein wichtiger Teil des Geschäfts.</span><span class="sxs-lookup"><span data-stu-id="0ad30-160">**Drone management** is also core to the business.</span></span> <span data-ttu-id="0ad30-161">Funktionen, die eng mit der Drohnenverwaltung verbunden sind, sind die **Drohnenreparatur** und der Einsatz von **Predictive Analysis**, um vorherzusagen, wann für Drohnen Wartungsarbeiten durchgeführt werden müssen.</span><span class="sxs-lookup"><span data-stu-id="0ad30-161">Functionality that is closely related to drone management includes **drone repair** and using **predictive analysis** to predict when drones need servicing and maintenance.</span></span> 
- <span data-ttu-id="0ad30-162">Mit der **ETA-Analyse** werden Schätzungen für den Zeitpunkt der Abholung und Lieferung bereitgestellt.</span><span class="sxs-lookup"><span data-stu-id="0ad30-162">**ETA analysis** provides time estimates for pickup and delivery.</span></span> 
- <span data-ttu-id="0ad30-163">Mit dem **Drittanbietertransport** wird die Anwendung in die Lage versetzt, alternative Transportmethoden zu planen, falls ein Paket nicht vollständig per Drohne ausgeliefert werden kann.</span><span class="sxs-lookup"><span data-stu-id="0ad30-163">**Third-party transportation** will enable the application to schedule alternative transportation methods if a package cannot be shipped entirely by drone.</span></span>
- <span data-ttu-id="0ad30-164">Die **Drohnenvermietung** ist eine mögliche Erweiterung des Kerngeschäfts.</span><span class="sxs-lookup"><span data-stu-id="0ad30-164">**Drone sharing** is a possible extension of the core business.</span></span> <span data-ttu-id="0ad30-165">Unter Umständen verfügt das Unternehmen zu bestimmten Zeiten über überschüssige Drohnenkapazität, sodass Drohnen vermietet werden können, die andernfalls ungenutzt bleiben würden.</span><span class="sxs-lookup"><span data-stu-id="0ad30-165">The company may have excess drone capacity during certain hours, and could rent out drones that would otherwise be idle.</span></span> <span data-ttu-id="0ad30-166">Dieses Feature ist nicht Teil der ersten Releaseversion.</span><span class="sxs-lookup"><span data-stu-id="0ad30-166">This feature will not be in the initial release.</span></span>
- <span data-ttu-id="0ad30-167">Die **Videoüberwachung** ist ein weiterer Bereich, in den das Unternehmen später expandieren kann.</span><span class="sxs-lookup"><span data-stu-id="0ad30-167">**Video surveillance** is another area that the company might expand into later.</span></span>
- <span data-ttu-id="0ad30-168">**Benutzerkonten**, **Rechnungsstellung** und **Callcenter** sind Unterdomänen zur Unterstützung des Kerngeschäfts.</span><span class="sxs-lookup"><span data-stu-id="0ad30-168">**User accounts**, **Invoicing**, and **Call center** are subdomains that support the core business.</span></span>
 
<span data-ttu-id="0ad30-169">Beachten Sie, dass wir an diesem Punkt des Prozesses noch keinerlei Entscheidungen zur Implementierung oder zur Technologie getroffen haben.</span><span class="sxs-lookup"><span data-stu-id="0ad30-169">Notice that at this point in the process, we haven't made any decisions about implementation or technologies.</span></span> <span data-ttu-id="0ad30-170">Einige Untersysteme können externe Softwaresysteme oder Drittanbieterdienste betreffen.</span><span class="sxs-lookup"><span data-stu-id="0ad30-170">Some of the subsystems may involve external software systems or third-party services.</span></span> <span data-ttu-id="0ad30-171">Trotzdem muss die Anwendung mit diesen Systemen und Diensten interagieren, und es ist wichtig, sie in das Domänenmodell einzubinden.</span><span class="sxs-lookup"><span data-stu-id="0ad30-171">Even so, the application needs to interact with these systems and services, so it's important to include them in the domain model.</span></span> 

> [!NOTE]
> <span data-ttu-id="0ad30-172">Wenn eine Anwendung von einem externen System abhängig ist, besteht das Risiko, dass das Datenschema oder die API des externen Systems in Ihre Anwendung hineinreicht und letztendlich den Entwurf der Architektur kompromittiert.</span><span class="sxs-lookup"><span data-stu-id="0ad30-172">When an application depends on an external system, there is a risk that the external system's data schema or API will leak into your application, ultimately compromising the architectural design.</span></span> <span data-ttu-id="0ad30-173">Dies gilt besonders für ältere Systeme, bei denen ggf. keine modernen bewährten Methoden befolgt und verworrene Datenschemas oder veraltete APIs verwendet werden.</span><span class="sxs-lookup"><span data-stu-id="0ad30-173">This is particularly true with legacy systems that may not follow modern best practices, and may use convoluted data schemas or obsolete APIs.</span></span> <span data-ttu-id="0ad30-174">In diesem Fall ist es wichtig, eine klar definierte Grenze zwischen diesen externen Systemen und der Anwendung einzurichten.</span><span class="sxs-lookup"><span data-stu-id="0ad30-174">In that case, it's important to have a well-defined boundary between these external systems and the application.</span></span> <span data-ttu-id="0ad30-175">Erwägen Sie zu diesem Zweck die Verwendung des [Einschnürungsmusters](../patterns/strangler.md) oder des [Musters „Antibeschädigungsebene“](../patterns/anti-corruption-layer.md).</span><span class="sxs-lookup"><span data-stu-id="0ad30-175">Consider using the [Strangler Pattern](../patterns/strangler.md) or the [Anti-Corruption Layer Pattern](../patterns/anti-corruption-layer.md) for this purpose.</span></span>

## <a name="define-bounded-contexts"></a><span data-ttu-id="0ad30-176">Definieren von Kontextgrenzen</span><span class="sxs-lookup"><span data-stu-id="0ad30-176">Define bounded contexts</span></span>

<span data-ttu-id="0ad30-177">Das Domänenmodell enthält Darstellungen von realen Dingen: Benutzer, Drohnen, Pakete usw.</span><span class="sxs-lookup"><span data-stu-id="0ad30-177">The domain model will include representations of real things in the world &mdash; users, drones, packages, and so forth.</span></span> <span data-ttu-id="0ad30-178">Dies bedeutet aber nicht, dass jeder Teil des Systems für dieselben Dinge die gleichen Darstellungen verwenden muss.</span><span class="sxs-lookup"><span data-stu-id="0ad30-178">But that doesn't mean that every part of the system needs to use the same representations for the same things.</span></span> 

<span data-ttu-id="0ad30-179">Beispielsweise müssen Subsysteme, die für die Drohnenreparatur und Predictive Analytics zuständig sind, viele physische Merkmale von Drohnen darstellen, z.B. den Wartungsverlauf, Kilometerleistung, Alter, Modellnummer, Leistungsmerkmale usw.</span><span class="sxs-lookup"><span data-stu-id="0ad30-179">For example, subsystems that handle drone repair and predictive analysis will need to represent many physical characteristics drones, such as their maintenance history, mileage, age, model number, performance characteristics, and so on.</span></span> <span data-ttu-id="0ad30-180">Wenn es aber um die Planung einer Lieferung geht, kümmern wir uns nicht um diese Dinge.</span><span class="sxs-lookup"><span data-stu-id="0ad30-180">But when it's time to schedule a delivery, we don't care about those things.</span></span> <span data-ttu-id="0ad30-181">Das Subsystem für die Planung muss nur wissen, ob eine Drohne verfügbar ist und welcher geschätzte Zeitpunkt für die Abholung und die Lieferung gilt.</span><span class="sxs-lookup"><span data-stu-id="0ad30-181">The scheduling subsystem only needs to know whether a drone is available, and the ETA for pickup and delivery.</span></span> 

<span data-ttu-id="0ad30-182">Wenn wir versuchen würden, ein gemeinsames Modell für beide Subsysteme zu erstellen, wäre dies ein unnötig komplexer Vorgang.</span><span class="sxs-lookup"><span data-stu-id="0ad30-182">If we tried to create a single model for both of these subsystems, it would be unnecessarily complex.</span></span> <span data-ttu-id="0ad30-183">Außerdem wäre es schwieriger, das Modell im Laufe der Zeit weiterzuentwickeln, da alle Änderungen die Zustimmung mehrerer Teams erhalten müssen, die an separaten Subsystemen arbeiten.</span><span class="sxs-lookup"><span data-stu-id="0ad30-183">It would also become harder for the model to evolve over time, because any changes will need to satisfy multiple teams working on separate subsystems.</span></span> <span data-ttu-id="0ad30-184">Daher ist es häufig besser, separate Modelle zu entwerfen, bei denen die gleiche reale Entität (in diesem Fall eine Drohne) in zwei unterschiedlichen Kontexten dargestellt wird.</span><span class="sxs-lookup"><span data-stu-id="0ad30-184">Therefore, it's often better to design separate models that represent the same real-world entity (in this case, a drone) in two different contexts.</span></span> <span data-ttu-id="0ad30-185">Jedes Modell enthält nur die Features und Attribute, die im jeweiligen Kontext relevant sind.</span><span class="sxs-lookup"><span data-stu-id="0ad30-185">Each model contains only the features and attributes that are relevant within its particular context.</span></span>

<span data-ttu-id="0ad30-186">An dieser Stelle wird auf das DDD-Konzept der *Kontextgrenzen* zurückgegriffen.</span><span class="sxs-lookup"><span data-stu-id="0ad30-186">This is where the DDD concept of *bounded contexts* comes into play.</span></span> <span data-ttu-id="0ad30-187">Eine Kontextgrenze bezeichnet einfach den abgegrenzten Bereich innerhalb einer Domäne, in dem ein bestimmtes Domänenmodell gilt.</span><span class="sxs-lookup"><span data-stu-id="0ad30-187">A bounded context is simply the boundary within a domain where a particular domain model applies.</span></span> <span data-ttu-id="0ad30-188">Wenn wir uns das obige Diagramm ansehen, können wir die Funktionalität danach gruppieren, ob von den einzelnen Funktionen ein Domänenmodell gemeinsam genutzt wird.</span><span class="sxs-lookup"><span data-stu-id="0ad30-188">Looking at the previous diagram, we can group functionality according to whether various functions will share a single domain model.</span></span> 

![](./images/ddd2.svg) 
 
<span data-ttu-id="0ad30-189">Kontextgrenzen bedeuten nicht unbedingt, dass Kontexte voneinander isoliert sind.</span><span class="sxs-lookup"><span data-stu-id="0ad30-189">Bounded contexts are not necessarily isolated from one another.</span></span> <span data-ttu-id="0ad30-190">In diesem Diagramm zeigen die durchgehenden Verbindungslinien zwischen den Kontextgrenzen die Stellen an, an denen die Kontexte zweier Kontextgrenzen interagieren.</span><span class="sxs-lookup"><span data-stu-id="0ad30-190">In this diagram, the solid lines connecting the bounded contexts represent places where two bounded contexts interact.</span></span> <span data-ttu-id="0ad30-191">Beispielsweise ist „Lieferung“ von „Benutzerkonten“ abhängig, um Informationen zu Kunden zu erhalten, und von „Drohnenverwaltung“, um die Drohnen der Flotte einplanen zu können.</span><span class="sxs-lookup"><span data-stu-id="0ad30-191">For example, Shipping depends on User Accounts to get information about customers, and on Drone Management to schedule drones from the fleet.</span></span>

<span data-ttu-id="0ad30-192">In seinem Buch *Domain Driven Design* beschreibt Eric Evans mehrere Muster zur Wahrung der Integrität eines Domänenmodells, wenn es mit dem Kontext einer anderen Kontextgrenze interagiert.</span><span class="sxs-lookup"><span data-stu-id="0ad30-192">In the book *Domain Driven Design*, Eric Evans describes several patterns for maintaining the integrity of a domain model when it interacts with another bounded context.</span></span> <span data-ttu-id="0ad30-193">Eines der wichtigsten Prinzipien von Microservices ist die Kommunikation der Dienste über klar definierte APIs.</span><span class="sxs-lookup"><span data-stu-id="0ad30-193">One of the main principles of microservices is that services communicate through well-defined APIs.</span></span> <span data-ttu-id="0ad30-194">Dieser Ansatz entspricht zwei Mustern, die von Eric Evans als „Open Host Service“ (Offener Hostdienst) und „Published Language“ (Veröffentlichte Sprache) bezeichnet werden.</span><span class="sxs-lookup"><span data-stu-id="0ad30-194">This approach corresponds to two patterns that Evans calls Open Host Service and Published Language.</span></span> <span data-ttu-id="0ad30-195">Bei „Open Host Service“ definiert ein Subsystem ein formelles Protokoll (API) für die Kommunikation mit anderen Subsystemen.</span><span class="sxs-lookup"><span data-stu-id="0ad30-195">The idea of Open Host Service is that a subsystem defines a formal protocol (API) for other subsystems to communicate with it.</span></span> <span data-ttu-id="0ad30-196">Mit „Published Language“ wird dieser Ansatz erweitert, indem die API in einer Form veröffentlicht wird, die von anderen Teams zum Schreiben von Clients genutzt werden kann.</span><span class="sxs-lookup"><span data-stu-id="0ad30-196">Published Language extends this idea by publishing the API in a form that other teams can use to write clients.</span></span> <span data-ttu-id="0ad30-197">Im Kapitel zum [API-Design](./api-design.md) wird die Verwendung der [OpenAPI-Spezifikation](https://www.openapis.org/specification/repo) (früher als Swagger bezeichnet) beschrieben. Sie wird zum Definieren von sprachunabhängigen Schnittstellenbeschreibungen für REST-APIs genutzt, die im JSON- oder YAML-Format ausgedrückt werden.</span><span class="sxs-lookup"><span data-stu-id="0ad30-197">In the chapter on [API Design](./api-design.md), we discuss using [OpenAPI Specification](https://www.openapis.org/specification/repo) (formerly known as Swagger) to define language-agnostic interface descriptions for REST APIs, expressed in JSON or YAML format.</span></span>

<span data-ttu-id="0ad30-198">Im restlichen Teil dieser Vorgehensweise konzentrieren wir uns auf die Kontextgrenze „Lieferung“.</span><span class="sxs-lookup"><span data-stu-id="0ad30-198">For the rest of this journey, we will focus on the Shipping bounded context.</span></span> 

## <a name="tactical-ddd"></a><span data-ttu-id="0ad30-199">Taktische DDD-Phase</span><span class="sxs-lookup"><span data-stu-id="0ad30-199">Tactical DDD</span></span>

<span data-ttu-id="0ad30-200">Während der strategischen DDD-Phase entwerfen Sie die Geschäftsdomäne und definieren Kontextgrenzen für Ihre Domänenmodelle.</span><span class="sxs-lookup"><span data-stu-id="0ad30-200">During the strategic phase of DDD, you are mapping out the business domain and defining bounded contexts for your domain models.</span></span> <span data-ttu-id="0ad30-201">In der taktischen DDD-Phase definieren Sie Ihre Domänenmodelle mit größerer Genauigkeit.</span><span class="sxs-lookup"><span data-stu-id="0ad30-201">Tactical DDD is when you define your domain models with more precision.</span></span> <span data-ttu-id="0ad30-202">Die taktischen Muster werden nur in einem Kontextgrenzenbereich angewendet.</span><span class="sxs-lookup"><span data-stu-id="0ad30-202">The tactical patterns are applied within a single bounded context.</span></span> <span data-ttu-id="0ad30-203">Bei einer Microservices-Architektur sind wir vor allem an den Entitäts- und Aggregatmustern interessiert.</span><span class="sxs-lookup"><span data-stu-id="0ad30-203">In a microservices architecture, we are particularly interested in the entity and aggregate patterns.</span></span> <span data-ttu-id="0ad30-204">Die Anwendung dieser Muster hilft uns dabei, natürliche Grenzen für die Dienste in unserer Anwendung zu identifizieren (siehe [nächste Kapitel](./microservice-boundaries.md)).</span><span class="sxs-lookup"><span data-stu-id="0ad30-204">Applying these patterns will help us to identify natural boundaries for the services in our application (see [next chapter](./microservice-boundaries.md)).</span></span> <span data-ttu-id="0ad30-205">Es gilt das allgemeine Prinzip, dass ein Microservice nicht kleiner als ein Aggregat und nicht größer als eine Kontextgrenze sein sollte.</span><span class="sxs-lookup"><span data-stu-id="0ad30-205">As a general principle, a microservice should be no smaller than an aggregate, and no larger than a bounded context.</span></span> <span data-ttu-id="0ad30-206">Zuerst überprüfen wir die taktischen Muster.</span><span class="sxs-lookup"><span data-stu-id="0ad30-206">First, we'll review the tactical patterns.</span></span> <span data-ttu-id="0ad30-207">Anschließend wenden wir sie auf die Kontextgrenze „Lieferung“ in der Anwendung für die Drohnenlieferung an.</span><span class="sxs-lookup"><span data-stu-id="0ad30-207">Then we'll apply them to the Shipping bounded context in the Drone Delivery application.</span></span> 

### <a name="overview-of-the-tactical-patterns"></a><span data-ttu-id="0ad30-208">Übersicht über die taktischen Muster</span><span class="sxs-lookup"><span data-stu-id="0ad30-208">Overview of the tactical patterns</span></span>

<span data-ttu-id="0ad30-209">Dieser Abschnitt enthält eine kurze Zusammenfassung der taktischen DDD-Muster. Unter Umständen können Sie diesen Abschnitt also überspringen, falls Sie mit DDD bereits vertraut sind.</span><span class="sxs-lookup"><span data-stu-id="0ad30-209">This section provides a brief summary of the tactical DDD patterns, so if you are already familiar with DDD, you can probably skip this section.</span></span> <span data-ttu-id="0ad30-210">Die Muster werden im Buch von Eric Evans (Kapitel 5 und 6) und in *Implementing Domain-Driven Design* von Vaughn Vernon ausführlicher beschrieben.</span><span class="sxs-lookup"><span data-stu-id="0ad30-210">The patterns are described in more detail in chapters 5 &ndash; 6 of Eric Evans' book, and in *Implementing Domain-Driven Design* by Vaughn Vernon.</span></span> 

![](./images/ddd-patterns.png)

<span data-ttu-id="0ad30-211">**Entitäten**:</span><span class="sxs-lookup"><span data-stu-id="0ad30-211">**Entities**.</span></span> <span data-ttu-id="0ad30-212">Eine Entität ist ein Objekt mit einer eindeutigen Identität, die bestehen bleibt.</span><span class="sxs-lookup"><span data-stu-id="0ad30-212">An entity is an object with a unique identity that persists over time.</span></span> <span data-ttu-id="0ad30-213">In einer Anwendung für Bankgeschäfte sind Kunden und Konten beispielsweise Entitäten.</span><span class="sxs-lookup"><span data-stu-id="0ad30-213">For example, in a banking application, customers and accounts would be entities.</span></span> 

- <span data-ttu-id="0ad30-214">Eine Entität verfügt im System über einen eindeutigen Bezeichner, mit dem die Entität nachgeschlagen bzw. abgerufen werden kann.</span><span class="sxs-lookup"><span data-stu-id="0ad30-214">An entity has a unique identifier in the system, which can be used to look up or retrieve the entity.</span></span> <span data-ttu-id="0ad30-215">Dies bedeutet nicht, dass der Bezeichner immer direkt für Benutzer verfügbar gemacht wird.</span><span class="sxs-lookup"><span data-stu-id="0ad30-215">That doesn't mean the identifier is always exposed directly to users.</span></span> <span data-ttu-id="0ad30-216">Es kann sich um eine GUID oder einen Primärschlüssel in einer Datenbank handeln.</span><span class="sxs-lookup"><span data-stu-id="0ad30-216">It could be a GUID or a primary key in a database.</span></span> 
- <span data-ttu-id="0ad30-217">Eine Identität kann übergreifend für mehrere Kontextgrenzenbereiche gelten und auch über die Lebensdauer der Anwendung hinaus beibehalten werden.</span><span class="sxs-lookup"><span data-stu-id="0ad30-217">An identity may span multiple bounded contexts, and may endure beyond the lifetime of the application.</span></span> <span data-ttu-id="0ad30-218">Beispielsweise sind Bankkontonummern oder von Behörden ausgestellte IDs nicht an die Lebensdauer einer bestimmten Anwendung gebunden.</span><span class="sxs-lookup"><span data-stu-id="0ad30-218">For example, bank account numbers or government-issued IDs are not tied to the lifetime of a particular application.</span></span>
- <span data-ttu-id="0ad30-219">Die Attribute einer Entität können sich im Laufe der Zeit ändern.</span><span class="sxs-lookup"><span data-stu-id="0ad30-219">The attributes of an entity may change over time.</span></span> <span data-ttu-id="0ad30-220">Beispielsweise können sich Name oder Adresse einer Person ändern, während sich die Person nicht ändert.</span><span class="sxs-lookup"><span data-stu-id="0ad30-220">For example, a person's name or address might change, but they are still the same person.</span></span> 
- <span data-ttu-id="0ad30-221">Eine Entität kann Verweise auf andere Entitäten enthalten.</span><span class="sxs-lookup"><span data-stu-id="0ad30-221">An entity can hold references to other entities.</span></span>
 
<span data-ttu-id="0ad30-222">**Wertobjekte**:</span><span class="sxs-lookup"><span data-stu-id="0ad30-222">**Value objects**.</span></span> <span data-ttu-id="0ad30-223">Ein Wertobjekt hat keine Identität.</span><span class="sxs-lookup"><span data-stu-id="0ad30-223">A value object has no identity.</span></span> <span data-ttu-id="0ad30-224">Es wird allein durch die Werte seiner Attribute definiert.</span><span class="sxs-lookup"><span data-stu-id="0ad30-224">It is defined only by the values of its attributes.</span></span> <span data-ttu-id="0ad30-225">Außerdem sind Wertobjekte unveränderlich.</span><span class="sxs-lookup"><span data-stu-id="0ad30-225">Value objects are also immutable.</span></span> <span data-ttu-id="0ad30-226">Für die Aktualisierung eines Wertobjekts erstellen Sie immer eine neue Instanz, um die alte zu ersetzen.</span><span class="sxs-lookup"><span data-stu-id="0ad30-226">To update a value object, you always create a new instance to replace the old one.</span></span> <span data-ttu-id="0ad30-227">Wertobjekte können über Methoden verfügen, in denen die Domänenlogik gekapselt ist, aber diese Methoden sollten nicht mit Nebenwirkungen in Bezug auf den Status des Objekts verbunden sein.</span><span class="sxs-lookup"><span data-stu-id="0ad30-227">Value objects can have methods that encapsulate domain logic, but those methods should have no side-effects on the object's state.</span></span> <span data-ttu-id="0ad30-228">Typische Beispiele für Wertobjekte sind Farben, Datum und Uhrzeit und Währungswerte.</span><span class="sxs-lookup"><span data-stu-id="0ad30-228">Typical examples of value objects include colors, dates and times, and currency values.</span></span> 

<span data-ttu-id="0ad30-229">**Aggregate**:</span><span class="sxs-lookup"><span data-stu-id="0ad30-229">**Aggregates**.</span></span> <span data-ttu-id="0ad30-230">Ein Aggregat definiert eine Konsistenzgrenze für eine oder mehrere Entitäten.</span><span class="sxs-lookup"><span data-stu-id="0ad30-230">An aggregate defines a consistency boundary around one or more entities.</span></span> <span data-ttu-id="0ad30-231">Eine bestimmte Entität in einem Aggregat ist die Stammentität.</span><span class="sxs-lookup"><span data-stu-id="0ad30-231">Exactly one entity in an aggregate is the root.</span></span> <span data-ttu-id="0ad30-232">Die Suche wird anhand des Bezeichners der Stammentität durchgeführt.</span><span class="sxs-lookup"><span data-stu-id="0ad30-232">Lookup is done using the root entity's identifier.</span></span> <span data-ttu-id="0ad30-233">Alle anderen Entitäten im Aggregat sind untergeordnete Elemente der Stammentität, und es wird darauf verwiesen, indem den Zeigern der Stammentität gefolgt wird.</span><span class="sxs-lookup"><span data-stu-id="0ad30-233">Any other entities in the aggregate are children of the root, and are referenced by following pointers from the root.</span></span> 

<span data-ttu-id="0ad30-234">Der Zweck eines Aggregats ist die Modellierung von Transaktionsinvarianten.</span><span class="sxs-lookup"><span data-stu-id="0ad30-234">The purpose of an aggregate is to model transactional invariants.</span></span> <span data-ttu-id="0ad30-235">Reale Dinge weisen komplexe Beziehungsgeflechte auf.</span><span class="sxs-lookup"><span data-stu-id="0ad30-235">Things in the real world have complex webs of relationships.</span></span> <span data-ttu-id="0ad30-236">Kunden geben Bestellungen auf, Bestellungen enthalten Produkte, Produkte haben Lieferanten usw.</span><span class="sxs-lookup"><span data-stu-id="0ad30-236">Customers create orders, orders contain products, products have suppliers, and so on.</span></span> <span data-ttu-id="0ad30-237">Wenn von der Anwendung mehrere zusammengehörige Objekte geändert werden, wie kann dann die Konsistenz gewährleistet werden?</span><span class="sxs-lookup"><span data-stu-id="0ad30-237">If the application modifies several related objects, how does it guarantee consistency?</span></span> <span data-ttu-id="0ad30-238">Wie können Invarianten nachverfolgt und erzwungen werden?</span><span class="sxs-lookup"><span data-stu-id="0ad30-238">How do we keep track of invariants and enforce them?</span></span>  

<span data-ttu-id="0ad30-239">In herkömmlichen Anwendungen wurden häufig Datenbanktransaktionen eingesetzt, um Konsistenz zu erzwingen.</span><span class="sxs-lookup"><span data-stu-id="0ad30-239">Traditional applications have often used database transactions to enforce consistency.</span></span> <span data-ttu-id="0ad30-240">In einer verteilten Anwendung ist dies aber oftmals nicht möglich.</span><span class="sxs-lookup"><span data-stu-id="0ad30-240">In a distributed application, however, that's often not feasible.</span></span> <span data-ttu-id="0ad30-241">Eine einzelne Geschäftstransaktion kann sich unter Umständen über mehrere Datenspeicher erstrecken, eine lange Ausführungsdauer aufweisen oder Drittanbieterdienste umfassen.</span><span class="sxs-lookup"><span data-stu-id="0ad30-241">A single business transaction may span multiple data stores, or may be long running, or may involve third-party services.</span></span> <span data-ttu-id="0ad30-242">Letztendlich liegt es an der Anwendung und nicht an der Datenschicht, die für die Domäne erforderlichen Invarianten zu erzwingen.</span><span class="sxs-lookup"><span data-stu-id="0ad30-242">Ultimately it's up to the application, not the data layer, to enforce the invariants required for the domain.</span></span> <span data-ttu-id="0ad30-243">Für die Durchführung dieser Modellierung sind Aggregate bestimmt.</span><span class="sxs-lookup"><span data-stu-id="0ad30-243">That's what aggregates are meant to model.</span></span>

> [!NOTE]
> <span data-ttu-id="0ad30-244">Ein Aggregat kann ggf. aus einer einzelnen Entität ohne untergeordnete Entitäten bestehen.</span><span class="sxs-lookup"><span data-stu-id="0ad30-244">An aggregate might consist of a single entity, without child entities.</span></span> <span data-ttu-id="0ad30-245">Durch die Transaktionsgrenze wird dies zu einem Aggregat.</span><span class="sxs-lookup"><span data-stu-id="0ad30-245">What makes it an aggregate is the transactional boundary.</span></span>

<span data-ttu-id="0ad30-246">**Domänen- und Anwendungsdienste**:</span><span class="sxs-lookup"><span data-stu-id="0ad30-246">**Domain and application services**.</span></span> <span data-ttu-id="0ad30-247">In der DDD-Terminologie ist ein Dienst ein Objekt, mit dem Logik implementiert wird, ohne dass ein Zustand vorgehalten wird.</span><span class="sxs-lookup"><span data-stu-id="0ad30-247">In DDD terminology, a service is an object that implements some logic without holding any state.</span></span> <span data-ttu-id="0ad30-248">Evans unterscheidet zwischen *Domänendiensten*, in denen die Domänenlogik gekapselt ist, und *Anwendungsdiensten*, mit denen die technische Funktionalität bereitgestellt wird, z.B. die Benutzerauthentifizierung oder das Senden einer SMS-Nachricht.</span><span class="sxs-lookup"><span data-stu-id="0ad30-248">Evans distinguishes between *domain services*, which encapsulate domain logic, and *application services*, which provide technical functionality, such as user authentication or sending an SMS message.</span></span> <span data-ttu-id="0ad30-249">Domänendienste werden häufig zum Modellieren von Verhalten verwendet, das mehrere Entitäten umfasst.</span><span class="sxs-lookup"><span data-stu-id="0ad30-249">Domain services are often used to model behavior that spans multiple entities.</span></span> 

> [!NOTE]
> <span data-ttu-id="0ad30-250">Der Begriff *Dienst* ist im Bereich der Softwareentwicklung mehrfach besetzt.</span><span class="sxs-lookup"><span data-stu-id="0ad30-250">The term *service* is overloaded in software development.</span></span> <span data-ttu-id="0ad30-251">Die Definition bezieht sich in diesem Fall nicht direkt auf Microservices.</span><span class="sxs-lookup"><span data-stu-id="0ad30-251">The definition here is not directly related to microservices.</span></span>

<span data-ttu-id="0ad30-252">**Domänenereignisse**:</span><span class="sxs-lookup"><span data-stu-id="0ad30-252">**Domain events**.</span></span> <span data-ttu-id="0ad30-253">Domänenereignisse können verwendet werden, um andere Teile des Systems zu benachrichtigen, wenn etwas passiert.</span><span class="sxs-lookup"><span data-stu-id="0ad30-253">Domain events can be used to notify other parts of the system when something happens.</span></span> <span data-ttu-id="0ad30-254">Wie der Name bereits vermuten lässt, sollten Domänenereignisse eine bestimmte Bedeutung innerhalb der Domäne haben.</span><span class="sxs-lookup"><span data-stu-id="0ad30-254">As the name suggests, domain events should mean something within the domain.</span></span> <span data-ttu-id="0ad30-255">Der Vorgang „Datensatz wurde in eine Tabelle eingefügt“ ist beispielsweise kein Domänenereignis.</span><span class="sxs-lookup"><span data-stu-id="0ad30-255">For example, "a record was inserted into a table" is not a domain event.</span></span> <span data-ttu-id="0ad30-256">Der Vorgang „Lieferung wurde storniert“ ist ein Domänenereignis.</span><span class="sxs-lookup"><span data-stu-id="0ad30-256">"A delivery was cancelled" is a domain event.</span></span> <span data-ttu-id="0ad30-257">Domänenereignisse sind besonders in einer Microservices-Architektur relevant.</span><span class="sxs-lookup"><span data-stu-id="0ad30-257">Domain events are especially relevant in a microservices architecture.</span></span> <span data-ttu-id="0ad30-258">Da Microservices verteilt vorliegen und keine Datenspeicher gemeinsam nutzen, stellen Domänenereignisse eine Möglichkeit dar, wie sich Microservices untereinander koordinieren können.</span><span class="sxs-lookup"><span data-stu-id="0ad30-258">Because microservices are distributed and don't share data stores, domain events provide a way for microservices to coordinate with each other.</span></span> <span data-ttu-id="0ad30-259">Im Kapitel zur [Kommunikation zwischen Diensten](./interservice-communication.md) wird das asynchrone Messaging ausführlicher beschrieben.</span><span class="sxs-lookup"><span data-stu-id="0ad30-259">The chapter [Interservice communication](./interservice-communication.md) discusses asynchronous messaging in more detail.</span></span>
 
<span data-ttu-id="0ad30-260">Es gibt noch einige andere DDD-Muster, die hier nicht aufgeführt sind, z.B. Factorys, Repositorys und Module.</span><span class="sxs-lookup"><span data-stu-id="0ad30-260">There are a few other DDD patterns not listed here, including factories, repositories, and modules.</span></span> <span data-ttu-id="0ad30-261">Dies können nützliche Muster für die Implementierung eines Microservice sein, aber sie sind weniger relevant, wenn es um das Entwerfen von Grenzen zwischen Microservices geht.</span><span class="sxs-lookup"><span data-stu-id="0ad30-261">These can be useful patterns for when you are implementing a microservice, but they are less relevant when designing the boundaries between microservice.</span></span>

## <a name="drone-delivery-applying-the-patterns"></a><span data-ttu-id="0ad30-262">Drohnenlieferung: Anwenden der Muster</span><span class="sxs-lookup"><span data-stu-id="0ad30-262">Drone delivery: Applying the patterns</span></span>

<span data-ttu-id="0ad30-263">Wir beginnen mit den Szenarien, die vom Kontextgrenzenbereich „Lieferung“ verarbeitet werden müssen.</span><span class="sxs-lookup"><span data-stu-id="0ad30-263">We start with the scenarios that the Shipping bounded context must handle.</span></span>

- <span data-ttu-id="0ad30-264">Ein Kunde kann eine Drohne anfordern, um Waren von einem Unternehmen abzuholen, das beim Dienst für die Drohnenlieferung registriert ist.</span><span class="sxs-lookup"><span data-stu-id="0ad30-264">A customer can request a drone to pick up goods from a business that is registered with the drone delivery service.</span></span>
- <span data-ttu-id="0ad30-265">Der Absender generiert eine Kennzeichnung per Tag (Strichcode oder RFID) für das Paket.</span><span class="sxs-lookup"><span data-stu-id="0ad30-265">The sender generates a tag (barcode or RFID) to put on the package.</span></span> 
- <span data-ttu-id="0ad30-266">Eine Drohne holt ein Paket ab und liefert es vom Ausgangsort an den Zielort.</span><span class="sxs-lookup"><span data-stu-id="0ad30-266">A drone will pick up and deliver a package from the source location to the destination location.</span></span>
- <span data-ttu-id="0ad30-267">Wenn ein Kunde eine Lieferung plant, wird vom System eine geschätzte Ankunftszeit angegeben, die auf den Routeninformationen, Wetterbedingungen und Verlaufsdaten basiert.</span><span class="sxs-lookup"><span data-stu-id="0ad30-267">When a customer schedules a delivery, the system provides an ETA based on route information, weather conditions, and historical data.</span></span> 
- <span data-ttu-id="0ad30-268">Wenn eine Drohne in der Luft ist, kann ein Benutzer den aktuellen Standort und die zuletzt ermittelte geschätzte Ankunftszeit nachverfolgen.</span><span class="sxs-lookup"><span data-stu-id="0ad30-268">When the drone is in flight, a user can track the current location and the latest ETA.</span></span> 
- <span data-ttu-id="0ad30-269">Der Kunde kann eine Lieferung stornieren, bis eine Drohne das Paket abgeholt hat.</span><span class="sxs-lookup"><span data-stu-id="0ad30-269">Until a drone has picked up the package, the customer can cancel a delivery.</span></span>
- <span data-ttu-id="0ad30-270">Der Kunde wird benachrichtigt, wenn die Lieferung abgeschlossen ist.</span><span class="sxs-lookup"><span data-stu-id="0ad30-270">The customer is notified when the delivery is completed.</span></span>
- <span data-ttu-id="0ad30-271">Der Absender kann vom Kunden eine Bestätigung der Lieferung in Form einer Signatur oder eines Fingerabdrucks anfordern.</span><span class="sxs-lookup"><span data-stu-id="0ad30-271">The sender can request delivery confirmation from the customer, in the form of a signature or finger print.</span></span>
- <span data-ttu-id="0ad30-272">Benutzer können den Verlauf einer abgeschlossenen Lieferung anzeigen.</span><span class="sxs-lookup"><span data-stu-id="0ad30-272">Users can look up the history of a completed delivery.</span></span>

<span data-ttu-id="0ad30-273">Anhand dieser Szenarien hat das Entwicklungsteam die folgenden **Entitäten** identifiziert.</span><span class="sxs-lookup"><span data-stu-id="0ad30-273">From these scenarios, the development team identified the following **entities**.</span></span>

- <span data-ttu-id="0ad30-274">Lieferung</span><span class="sxs-lookup"><span data-stu-id="0ad30-274">Delivery</span></span>
- <span data-ttu-id="0ad30-275">Paket</span><span class="sxs-lookup"><span data-stu-id="0ad30-275">Package</span></span>
- <span data-ttu-id="0ad30-276">Drohne</span><span class="sxs-lookup"><span data-stu-id="0ad30-276">Drone</span></span>
- <span data-ttu-id="0ad30-277">Konto</span><span class="sxs-lookup"><span data-stu-id="0ad30-277">Account</span></span>
- <span data-ttu-id="0ad30-278">Bestätigung</span><span class="sxs-lookup"><span data-stu-id="0ad30-278">Confirmation</span></span>
- <span data-ttu-id="0ad30-279">Benachrichtig.</span><span class="sxs-lookup"><span data-stu-id="0ad30-279">Notification</span></span>
- <span data-ttu-id="0ad30-280">Kategorie</span><span class="sxs-lookup"><span data-stu-id="0ad30-280">Tag</span></span>

<span data-ttu-id="0ad30-281">Die ersten vier Entitäten (Lieferung, Paket, Drohne und Konto) sind allesamt **Aggregate**, die für die Grenzen der Transaktionskonsistenz stehen.</span><span class="sxs-lookup"><span data-stu-id="0ad30-281">The first four, Delivery, Package, Drone, and Account, are all **aggregates** that represent transactional consistency boundaries.</span></span> <span data-ttu-id="0ad30-282">Bestätigungen und Benachrichtigungen sind untergeordnete Elemente von Lieferungen, und Tags sind untergeordnete Elemente von Paketen.</span><span class="sxs-lookup"><span data-stu-id="0ad30-282">Confirmations and Notifications are child entities of Deliveries, and Tags are child entities of Packages.</span></span> 

<span data-ttu-id="0ad30-283">Zu den **Wertobjekten** dieses Entwurfs gehören Standort, geschätzte Ankunftszeit, Paketgewicht und Paketgröße (Location, ETA, PackageWeight und PackageSize).</span><span class="sxs-lookup"><span data-stu-id="0ad30-283">The **value objects** in this design include Location, ETA, PackageWeight, and PackageSize.</span></span> 

<span data-ttu-id="0ad30-284">Zur besseren Veranschaulichung ist hier ein UML-Diagramm des Aggregats für die Lieferung (Delivery) angegeben.</span><span class="sxs-lookup"><span data-stu-id="0ad30-284">To illustrate, here is a UML diagram of the Delivery aggregate.</span></span> <span data-ttu-id="0ad30-285">Beachten Sie, dass es Verweise auf andere Aggregate enthält, z.B. Konto (Account), Paket (Package) und Drohne (Drone).</span><span class="sxs-lookup"><span data-stu-id="0ad30-285">Notice that it holds references to other aggregates, including Account, Package, and Drone.</span></span>

![](./images/delivery-entity.png)

<span data-ttu-id="0ad30-286">Es sind zwei Domänenereignisse vorhanden:</span><span class="sxs-lookup"><span data-stu-id="0ad30-286">There are two domain events:</span></span>

- <span data-ttu-id="0ad30-287">Während eine Drohne in der Luft ist, sendet die Drone-Entität DroneStatus-Ereignisse, mit denen der Standort und Status (Flug, Gelandet) der Drohne beschrieben werden.</span><span class="sxs-lookup"><span data-stu-id="0ad30-287">While a drone is in flight, the Drone entity sends DroneStatus events that describe the drone's location and status (in-flight, landed).</span></span>

- <span data-ttu-id="0ad30-288">Die Delivery-Entität sendet jeweils DeliveryTracking-Ereignisse, wenn sich die Phase einer Lieferung ändert.</span><span class="sxs-lookup"><span data-stu-id="0ad30-288">The Delivery entity sends DeliveryTracking events whenever the stage of a delivery changes.</span></span> <span data-ttu-id="0ad30-289">Beispiele hierfür sind DeliveryCreated, DeliveryRescheduled, DeliveryHeadedToDropoff und DeliveryCompleted.</span><span class="sxs-lookup"><span data-stu-id="0ad30-289">These include DeliveryCreated, DeliveryRescheduled, DeliveryHeadedToDropoff, and DeliveryCompleted.</span></span> 

<span data-ttu-id="0ad30-290">Beachten Sie, dass diese Ereignisse Dinge beschreiben, die innerhalb des Domänenmodells eine Bedeutung haben.</span><span class="sxs-lookup"><span data-stu-id="0ad30-290">Notice that these events describe things that are meaningful within the domain model.</span></span> <span data-ttu-id="0ad30-291">Sie beschreiben einen Aspekt der Domäne und sind nicht an ein Konstrukt einer bestimmten Programmiersprache gebunden.</span><span class="sxs-lookup"><span data-stu-id="0ad30-291">They describe something about the domain, and aren't tied to a particular programming language construct.</span></span>

<span data-ttu-id="0ad30-292">Das Entwicklungsteam hat noch einen weiteren Funktionalitätsbereich identifiziert, der nicht ohne Weiteres einer der bisher beschriebenen Entitäten zugeordnet werden kann.</span><span class="sxs-lookup"><span data-stu-id="0ad30-292">The development team identified one more area of functionality, which doesn't fit neatly into any of the entities described so far.</span></span> <span data-ttu-id="0ad30-293">Ein Teil des Systems muss alle Schritte koordinieren, die an der Planung oder Aktualisierung einer Lieferung beteiligt sind.</span><span class="sxs-lookup"><span data-stu-id="0ad30-293">Some part of the system must coordinate all of the steps involved in scheduling or updating a delivery.</span></span> <span data-ttu-id="0ad30-294">Aus diesem Grund hat das Entwicklungsteam dem Entwurf zwei **Domänendienste** hinzugefügt: einen *Scheduler* zum Koordinieren der Schritte und einen *Supervisor*, mit dem der Status der einzelnen Schritte überwacht und erkannt werden soll, ob für Schritte ein Fehler oder eine Zeitüberschreitung aufgetreten ist. Dies ist eine Variante des [Musters „Scheduler-Agent-Supervisor“](../patterns/scheduler-agent-supervisor.md).</span><span class="sxs-lookup"><span data-stu-id="0ad30-294">Therefore, the development team added two **domain services** to the design: a *Scheduler* that coordinates the steps, and a *Supervisor* that monitors the status of each step, in order to detect whether any steps have failed or timed out. This is a variation of the [Scheduler Agent Supervisor pattern](../patterns/scheduler-agent-supervisor.md).</span></span>

![](./images/drone-ddd.png)

> [!div class="nextstepaction"]
> [<span data-ttu-id="0ad30-295">Identifizieren von Microservice-Grenzen</span><span class="sxs-lookup"><span data-stu-id="0ad30-295">Identifying microservice boundaries</span></span>](./microservice-boundaries.md)
