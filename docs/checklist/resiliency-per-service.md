---
title: "Checkliste für Resilienz für Azure-Dienste"
description: "Checkliste mit einer Anleitung zur Resilienz für verschiedene Azure-Dienste."
author: petertaylor9999
ms.date: 03/02/2018
ms.custom: resiliency, checklist
ms.openlocfilehash: 25d961d6bb753b1f515fc073e51bbb912cc59db7
ms.sourcegitcommit: 2123c25b1a0b5501ff1887f98030787191cf6994
ms.translationtype: HT
ms.contentlocale: de-DE
ms.lasthandoff: 03/08/2018
---
# <a name="resiliency-checklist-for-specific-azure-services"></a><span data-ttu-id="3ee95-103">Checkliste für Resilienz für bestimmte Azure-Dienste</span><span class="sxs-lookup"><span data-stu-id="3ee95-103">Resiliency checklist for specific Azure services</span></span>

<span data-ttu-id="3ee95-104">Resilienz ist die Fähigkeit des Systems, nach Ausfällen für ein System eine Wiederherstellung durchzuführen und die Betriebsbereitschaft sicherzustellen. Sie gehört zu den [Säulen der Softwarequalität](../guide/pillars.md).</span><span class="sxs-lookup"><span data-stu-id="3ee95-104">Resiliency is the ability of a system to recover from failures and continue to function, and is one of the [pillars of software quality](../guide/pillars.md).</span></span> <span data-ttu-id="3ee95-105">Jede Technologie verfügt über ihre eigenen speziellen Fehlermodi, die Sie beim Entwerfen und Implementieren Ihrer Anwendung berücksichtigen müssen.</span><span class="sxs-lookup"><span data-stu-id="3ee95-105">Every technology has its own particular failure modes, which you must consider when designing and implementing your application.</span></span> <span data-ttu-id="3ee95-106">Verwenden Sie diese Checkliste, um die Resilienzaspekte für bestimmte Azure-Dienste zu überprüfen.</span><span class="sxs-lookup"><span data-stu-id="3ee95-106">Use this checklist to review the resiliency considerations for specific Azure services.</span></span> <span data-ttu-id="3ee95-107">Verwenden Sie auch die [allgemeine Checkliste zur Resilienz](./resiliency.md).</span><span class="sxs-lookup"><span data-stu-id="3ee95-107">Also review the [general resiliency checklist](./resiliency.md).</span></span>

## <a name="app-service"></a><span data-ttu-id="3ee95-108">App Service</span><span class="sxs-lookup"><span data-stu-id="3ee95-108">App Service</span></span>

<span data-ttu-id="3ee95-109">**Verwenden Sie den Standard- oder Premium-Tarif.**</span><span class="sxs-lookup"><span data-stu-id="3ee95-109">**Use Standard or Premium tier.**</span></span> <span data-ttu-id="3ee95-110">Diese Tarife unterstützen Stagingslots und automatisierte Sicherungen.</span><span class="sxs-lookup"><span data-stu-id="3ee95-110">These tiers support staging slots and automated backups.</span></span> <span data-ttu-id="3ee95-111">Weitere Informationen hierzu finden Sie unter [Azure App Service-Pläne – Detaillierte Übersicht](/azure/app-service/azure-web-sites-web-hosting-plans-in-depth-overview/).</span><span class="sxs-lookup"><span data-stu-id="3ee95-111">For more information, see [Azure App Service plans in-depth overview](/azure/app-service/azure-web-sites-web-hosting-plans-in-depth-overview/)</span></span>

<span data-ttu-id="3ee95-112">**Vermeiden Sie zentrales Hoch- oder Herunterskalieren.**</span><span class="sxs-lookup"><span data-stu-id="3ee95-112">**Avoid scaling up or down.**</span></span> <span data-ttu-id="3ee95-113">Wählen Sie stattdessen einen Tarif und eine Instanzgröße aus, der bzw. die Ihre Leistungsanforderungen unter typischer Last erfüllt, und [skalieren Sie die Instanzen horizontal hoch](/azure/app-service-web/web-sites-scale/), um Änderungen beim Datenverkehrsvolumen zu bewältigen.</span><span class="sxs-lookup"><span data-stu-id="3ee95-113">Instead, select a tier and instance size that meet your performance requirements under typical load, and then [scale out](/azure/app-service-web/web-sites-scale/) the instances to handle changes in traffic volume.</span></span> <span data-ttu-id="3ee95-114">Durch zentrales Hoch- oder Herunterskalieren kann ein Neustart der Anwendung ausgelöst werden.</span><span class="sxs-lookup"><span data-stu-id="3ee95-114">Scaling up and down may trigger an application restart.</span></span>  

<span data-ttu-id="3ee95-115">**Speichern Sie die Konfiguration als App-Einstellungen.**</span><span class="sxs-lookup"><span data-stu-id="3ee95-115">**Store configuration as app settings.**</span></span> <span data-ttu-id="3ee95-116">Verwenden Sie App-Einstellungen, um die Konfigurationseinstellungen als App-Einstellungen zu speichern.</span><span class="sxs-lookup"><span data-stu-id="3ee95-116">Use app settings to hold configuration settings as app settings.</span></span> <span data-ttu-id="3ee95-117">Definieren Sie die Einstellungen in den Resource Manager-Vorlagen oder mithilfe von PowerShell, sodass Sie sie als Teil einer automatisierten Bereitstellung/Aktualisierung anwenden können, um die Zuverlässigkeit zu erhöhen.</span><span class="sxs-lookup"><span data-stu-id="3ee95-117">Define the settings in your Resource Manager templates, or using PowerShell, so that you can apply them as part of an automated deployment / update process, which is more reliable.</span></span> <span data-ttu-id="3ee95-118">Weitere Informationen finden Sie unter [Konfigurieren von Web-Apps in Azure App Service](/azure/app-service-web/web-sites-configure/).</span><span class="sxs-lookup"><span data-stu-id="3ee95-118">For more information, see [Configure web apps in Azure App Service](/azure/app-service-web/web-sites-configure/).</span></span>

<span data-ttu-id="3ee95-119">**Erstellen Sie separate App Service-Pläne für die Produktion und für Tests.**</span><span class="sxs-lookup"><span data-stu-id="3ee95-119">**Create separate App Service plans for production and test.**</span></span> <span data-ttu-id="3ee95-120">Verwenden Sie keine Slots Ihrer Produktionsbereitstellung zu Testzwecken.</span><span class="sxs-lookup"><span data-stu-id="3ee95-120">Don't use slots on your production deployment for testing.</span></span>  <span data-ttu-id="3ee95-121">Alle Apps in einem App Service-Plan nutzen die gleichen VM-Instanzen.</span><span class="sxs-lookup"><span data-stu-id="3ee95-121">All apps within the same App Service plan share the same VM instances.</span></span> <span data-ttu-id="3ee95-122">Wenn Sie Produktions- und Testbereitstellungen in den gleichen Plan aufnehmen, kann sich dies negativ auf die Produktionsbereitstellung auswirken.</span><span class="sxs-lookup"><span data-stu-id="3ee95-122">If you put production and test deployments in the same plan, it can negatively affect the production deployment.</span></span> <span data-ttu-id="3ee95-123">Auslastungstests können z.B. den aktiven Produktionsstandort beeinträchtigen.</span><span class="sxs-lookup"><span data-stu-id="3ee95-123">For example, load tests might degrade the live production site.</span></span> <span data-ttu-id="3ee95-124">Wenn Sie Testbereitstellungen in einen separaten Plan aufnehmen, isolieren Sie sie von der Produktionsversion.</span><span class="sxs-lookup"><span data-stu-id="3ee95-124">By putting test deployments into a separate plan, you isolate them from the production version.</span></span>  

<span data-ttu-id="3ee95-125">**Trennen Sie Web-Apps von Web-APIs.**</span><span class="sxs-lookup"><span data-stu-id="3ee95-125">**Separate web apps from web APIs.**</span></span> <span data-ttu-id="3ee95-126">Wenn zu Ihrer Lösung ein Web-Front-End und eine Web-API gehören, sollten Sie sie in getrennte App Service-Apps aufnehmen.</span><span class="sxs-lookup"><span data-stu-id="3ee95-126">If your solution has both a web front-end and a web API, consider decomposing them into separate App Service apps.</span></span> <span data-ttu-id="3ee95-127">Dieser Entwurf erleichtert es, die Lösung nach Workloads zu zerlegen.</span><span class="sxs-lookup"><span data-stu-id="3ee95-127">This design makes it easier to decompose the solution by workload.</span></span> <span data-ttu-id="3ee95-128">Sie können dann die Web-App und die API in separaten App Service-Plänen ausführen, sodass sie unabhängig skaliert werden können.</span><span class="sxs-lookup"><span data-stu-id="3ee95-128">You can run the web app and the API in separate App Service plans, so they can be scaled independently.</span></span> <span data-ttu-id="3ee95-129">Wenn Sie diesen Grad an Skalierbarkeit anfänglich nicht benötigen, können Sie die Apps im gleichen Plan bereitstellen und sie später bei Bedarf in separate Pläne verschieben.</span><span class="sxs-lookup"><span data-stu-id="3ee95-129">If you don't need that level of scalability at first, you can deploy the apps into the same plan, and move them into separate plans later, if needed.</span></span>

<span data-ttu-id="3ee95-130">**Vermeiden Sie die Verwendung der App Service-Sicherungsfunktion, um Azure SQL-Datenbanken zu sichern.**</span><span class="sxs-lookup"><span data-stu-id="3ee95-130">**Avoid using the App Service backup feature to back up Azure SQL databases.**</span></span> <span data-ttu-id="3ee95-131">Verwenden Sie stattdessen [automatisierte SQL-Datenbanksicherungen][sql-backup].</span><span class="sxs-lookup"><span data-stu-id="3ee95-131">Instead, use [SQL Database automated backups][sql-backup].</span></span> <span data-ttu-id="3ee95-132">Bei der App Service-Sicherung wird die Datenbank in eine SQL-BACPAC-Datei exportiert, und dies kostet DTUs.</span><span class="sxs-lookup"><span data-stu-id="3ee95-132">App Service backup exports the database to a SQL .bacpac file, which costs DTUs.</span></span>  

<span data-ttu-id="3ee95-133">**Führen Sie die Bereitstellung in einem Stagingslot durch.**</span><span class="sxs-lookup"><span data-stu-id="3ee95-133">**Deploy to a staging slot.**</span></span> <span data-ttu-id="3ee95-134">Erstellen Sie einen Bereitstellungsslot für das Staging.</span><span class="sxs-lookup"><span data-stu-id="3ee95-134">Create a deployment slot for staging.</span></span> <span data-ttu-id="3ee95-135">Stellen Sie Anwendungsupdates im Stagingslot bereit, und überprüfen Sie die Bereitstellung, bevor Sie sie in die Produktion übertragen.</span><span class="sxs-lookup"><span data-stu-id="3ee95-135">Deploy application updates to the staging slot, and verify the deployment before swapping it into production.</span></span> <span data-ttu-id="3ee95-136">Dies reduziert die Wahrscheinlichkeit fehlerhafter Updates in der Produktion.</span><span class="sxs-lookup"><span data-stu-id="3ee95-136">This reduces the chance of a bad update in production.</span></span> <span data-ttu-id="3ee95-137">Darüber hinaus wird sichergestellt, dass alle Instanzen vorbereitet sind, bevor sie in die Produktion übertragen werden.</span><span class="sxs-lookup"><span data-stu-id="3ee95-137">It also ensures that all instances are warmed up before being swapped into production.</span></span> <span data-ttu-id="3ee95-138">Viele Anwendungen weisen eine erhebliche Aufwärmdauer und Kaltstartzeit auf.</span><span class="sxs-lookup"><span data-stu-id="3ee95-138">Many applications have a significant warmup and cold-start time.</span></span> <span data-ttu-id="3ee95-139">Weitere Informationen finden Sie unter [Einrichten von Stagingumgebungen für Web-Apps in Azure App Service](/azure/app-service-web/web-sites-staged-publishing/).</span><span class="sxs-lookup"><span data-stu-id="3ee95-139">For more information, see [Set up staging environments for web apps in Azure App Service](/azure/app-service-web/web-sites-staged-publishing/).</span></span>

<span data-ttu-id="3ee95-140">**Erstellen Sie einen Bereitstellungsslot, um die letzte als funktionierend bekannte (LKG) Bereitstellung zu speichern.**</span><span class="sxs-lookup"><span data-stu-id="3ee95-140">**Create a deployment slot to hold the last-known-good (LKG) deployment.**</span></span> <span data-ttu-id="3ee95-141">Wenn Sie ein Update in der Produktion bereitstellen, verschieben Sie die vorherige Produktionsbereitstellung in den LKG-Slot.</span><span class="sxs-lookup"><span data-stu-id="3ee95-141">When you deploy an update to production, move the previous production deployment into the LKG slot.</span></span> <span data-ttu-id="3ee95-142">Dies erleichtert die Zurücksetzung einer fehlerhaften Bereitstellung.</span><span class="sxs-lookup"><span data-stu-id="3ee95-142">This makes it easier to roll back a bad deployment.</span></span> <span data-ttu-id="3ee95-143">Wenn Sie später ein Problem feststellen, können Sie schnell die LKG-Version wiederherstellen.</span><span class="sxs-lookup"><span data-stu-id="3ee95-143">If you discover a problem later, you can quickly revert to the LKG version.</span></span> <span data-ttu-id="3ee95-144">Weitere Informationen finden Sie unter [Einfache Webanwendung](../reference-architectures/app-service-web-app/basic-web-app.md).</span><span class="sxs-lookup"><span data-stu-id="3ee95-144">For more information, see [Basic web application](../reference-architectures/app-service-web-app/basic-web-app.md).</span></span>

<span data-ttu-id="3ee95-145">**Aktivieren Sie die Diagnoseprotokollierung**, einschließlich der Anwendungsprotokollierung und der Webserverprotokollierung.</span><span class="sxs-lookup"><span data-stu-id="3ee95-145">**Enable diagnostics logging**, including application logging and web server logging.</span></span> <span data-ttu-id="3ee95-146">Protokollierung ist wichtig für die Überwachung und die Diagnose.</span><span class="sxs-lookup"><span data-stu-id="3ee95-146">Logging is important for monitoring and diagnostics.</span></span> <span data-ttu-id="3ee95-147">Weitere Informationen finden Sie unter [Aktivieren der Diagnoseprotokollierung für Web-Apps in Azure App Service](/azure/app-service-web/web-sites-enable-diagnostic-log/).</span><span class="sxs-lookup"><span data-stu-id="3ee95-147">See [Enable diagnostics logging for web apps in Azure App Service](/azure/app-service-web/web-sites-enable-diagnostic-log/)</span></span>

<span data-ttu-id="3ee95-148">**Speichern Sie Protokolle im Blobspeicher.**</span><span class="sxs-lookup"><span data-stu-id="3ee95-148">**Log to blob storage.**</span></span> <span data-ttu-id="3ee95-149">Dies erleichtert das Erfassen und Analysieren der Daten.</span><span class="sxs-lookup"><span data-stu-id="3ee95-149">This makes it easier to collect and analyze the data.</span></span>

<span data-ttu-id="3ee95-150">**Erstellen Sie ein separates Speicherkonto für Protokolle.**</span><span class="sxs-lookup"><span data-stu-id="3ee95-150">**Create a separate storage account for logs.**</span></span> <span data-ttu-id="3ee95-151">Verwenden Sie nicht das gleiche Speicherkonto für Protokolle und Anwendungsdaten.</span><span class="sxs-lookup"><span data-stu-id="3ee95-151">Don't use the same storage account for logs and application data.</span></span> <span data-ttu-id="3ee95-152">Dadurch wird verhindert, dass die Protokollierung die Anwendungsleistung verringert.</span><span class="sxs-lookup"><span data-stu-id="3ee95-152">This helps to prevent logging from reducing application performance.</span></span>

<span data-ttu-id="3ee95-153">**Überwachen Sie die Leistung.**</span><span class="sxs-lookup"><span data-stu-id="3ee95-153">**Monitor performance.**</span></span> <span data-ttu-id="3ee95-154">Verwenden Sie einen Leistungsüberwachungsdienst wie [New Relic](http://newrelic.com/) oder [Application Insights](/azure/application-insights/app-insights-overview/), um Leistung und Verhalten der Anwendung unter Last zu überwachen.</span><span class="sxs-lookup"><span data-stu-id="3ee95-154">Use a performance monitoring service such as [New Relic](http://newrelic.com/) or [Application Insights](/azure/application-insights/app-insights-overview/) to monitor application performance and behavior under load.</span></span>  <span data-ttu-id="3ee95-155">Durch die Leistungsüberwachung erhalten Sie in Echtzeit Einblicke in die Anwendung.</span><span class="sxs-lookup"><span data-stu-id="3ee95-155">Performance monitoring gives you real-time insight into the application.</span></span> <span data-ttu-id="3ee95-156">Dadurch können Sie Probleme diagnostizieren und eine Ursachenanalyse von Fehlern durchführen.</span><span class="sxs-lookup"><span data-stu-id="3ee95-156">It enables you to diagnose issues and perform root-cause analysis of failures.</span></span>

## <a name="application-gateway"></a><span data-ttu-id="3ee95-157">Application Gateway</span><span class="sxs-lookup"><span data-stu-id="3ee95-157">Application Gateway</span></span>

<span data-ttu-id="3ee95-158">**Stellen Sie mindestens zwei Instanzen bereit.**</span><span class="sxs-lookup"><span data-stu-id="3ee95-158">**Provision at least two instances.**</span></span> <span data-ttu-id="3ee95-159">Stellen Sie Application Gateway mit mindestens zwei Instanzen bereit.</span><span class="sxs-lookup"><span data-stu-id="3ee95-159">Deploy Application Gateway with at least two instances.</span></span> <span data-ttu-id="3ee95-160">Eine einzelne Instanz ist ein Single Point of Failure.</span><span class="sxs-lookup"><span data-stu-id="3ee95-160">A single instance is a single point of failure.</span></span> <span data-ttu-id="3ee95-161">Verwenden Sie zwei oder mehr Instanzen für Redundanz und Skalierbarkeit.</span><span class="sxs-lookup"><span data-stu-id="3ee95-161">Use two or more instances for redundancy and scalability.</span></span> <span data-ttu-id="3ee95-162">Um sich für die [SLA](https://azure.microsoft.com/support/legal/sla/application-gateway/v1_0/) zu qualifizieren, müssen Sie zwei oder mehr mittelgroße oder größere Instanzen bereitstellen.</span><span class="sxs-lookup"><span data-stu-id="3ee95-162">In order to qualify for the [SLA](https://azure.microsoft.com/support/legal/sla/application-gateway/v1_0/), you must provision two or more medium or larger instances.</span></span>

## <a name="cosmos-db"></a><span data-ttu-id="3ee95-163">Cosmos DB</span><span class="sxs-lookup"><span data-stu-id="3ee95-163">Cosmos DB</span></span>

<span data-ttu-id="3ee95-164">**Replizieren Sie die Datenbank zwischen Regionen.**</span><span class="sxs-lookup"><span data-stu-id="3ee95-164">**Replicate the database across regions.**</span></span> <span data-ttu-id="3ee95-165">Mit Cosmos DB können Sie einem Cosmos DB-Datenbankkonto eine beliebige Anzahl von Azure-Regionen zuordnen.</span><span class="sxs-lookup"><span data-stu-id="3ee95-165">Cosmos DB allows you to associate any number of Azure regions with a Cosmos DB database account.</span></span> <span data-ttu-id="3ee95-166">Eine Cosmos-DB-Datenbank kann eine Schreibregion und mehrere Leseregionen aufweisen.</span><span class="sxs-lookup"><span data-stu-id="3ee95-166">A Cosmos DB database can have one write region and multiple read regions.</span></span> <span data-ttu-id="3ee95-167">Bei einem Fehler in der Schreibregion können Sie ein anderes Replikat für Lesezugriff verwenden.</span><span class="sxs-lookup"><span data-stu-id="3ee95-167">If there is a failure in the write region, you can read from another replica.</span></span> <span data-ttu-id="3ee95-168">Das Client-SDK verarbeitet dies automatisch.</span><span class="sxs-lookup"><span data-stu-id="3ee95-168">The Client SDK handles this automatically.</span></span> <span data-ttu-id="3ee95-169">Sie können auch ein Failover der Schreibregion auf eine andere Region ausführen.</span><span class="sxs-lookup"><span data-stu-id="3ee95-169">You can also fail over the write region to another region.</span></span> <span data-ttu-id="3ee95-170">Weitere Informationen finden Sie unter [Wie werden Daten mit Azure Cosmos DB global verteilt?](/azure/cosmos-db/distribute-data-globally).</span><span class="sxs-lookup"><span data-stu-id="3ee95-170">For more information, see [How to distribute data globally with Azure Cosmos DB](/azure/cosmos-db/distribute-data-globally).</span></span>

## <a name="event-hubs"></a><span data-ttu-id="3ee95-171">Event Hubs</span><span class="sxs-lookup"><span data-stu-id="3ee95-171">Event Hubs</span></span>

<span data-ttu-id="3ee95-172">**Verwenden Sie Prüfpunkte.**</span><span class="sxs-lookup"><span data-stu-id="3ee95-172">**Use checkpoints**.</span></span>  <span data-ttu-id="3ee95-173">Ein Ereignisconsumer sollte seine aktuelle Position in vordefinierten Intervallen in einen beständigen Speicher schreiben.</span><span class="sxs-lookup"><span data-stu-id="3ee95-173">An event consumer should write its current position to persistent storage at some predefined interval.</span></span> <span data-ttu-id="3ee95-174">Falls für den Consumer ein Fehler auftritt (z.B. ein Absturz des Consumers oder Ausfall des Hosts), kann eine neue Instanz das Lesen des Datenstroms dann ab der zuletzt aufgezeichneten Position fortsetzen.</span><span class="sxs-lookup"><span data-stu-id="3ee95-174">That way, if the consumer experiences a fault (for example, the consumer crashes, or the host fails), then a new instance can resume reading the stream from the last recorded position.</span></span> <span data-ttu-id="3ee95-175">Weitere Informationen finden Sie unter [Ereignisconsumer](/azure/event-hubs/event-hubs-features#event-consumers).</span><span class="sxs-lookup"><span data-stu-id="3ee95-175">For more information, see [Event consumers](/azure/event-hubs/event-hubs-features#event-consumers).</span></span>

<span data-ttu-id="3ee95-176">**Regeln Sie den Umgang mit doppelten Nachrichten.**</span><span class="sxs-lookup"><span data-stu-id="3ee95-176">**Handle duplicate messages.**</span></span> <span data-ttu-id="3ee95-177">Wenn ein Ereignisconsumer ausfällt, wird die Nachrichtenverarbeitung ab dem letzten aufgezeichneten Prüfpunkt fortgesetzt.</span><span class="sxs-lookup"><span data-stu-id="3ee95-177">If an event consumer fails, message processing is resumed from the last recorded checkpoint.</span></span> <span data-ttu-id="3ee95-178">Alle Nachrichten, die nach dem letzten Prüfpunkt bereits verarbeitet wurden, werden erneut verarbeitet.</span><span class="sxs-lookup"><span data-stu-id="3ee95-178">Any messages that were already processed after the last checkpoint will be processed again.</span></span> <span data-ttu-id="3ee95-179">Aus diesem Grund muss Ihre Logik für die Nachrichtenverarbeitung idempotent sein, oder die Anwendung muss eine Deduplizierung von Nachrichten durchführen können.</span><span class="sxs-lookup"><span data-stu-id="3ee95-179">Therefore, your message processing logic must be idempotent, or the application must be able to deduplicate messages.</span></span>

<span data-ttu-id="3ee95-180">**Behandeln Sie Ausnahmen.**</span><span class="sxs-lookup"><span data-stu-id="3ee95-180">**Handle exceptions.**.</span></span> <span data-ttu-id="3ee95-181">Ein Ereignisconsumer verarbeitet einen Batch mit Nachrichten normalerweise in einer Schleife.</span><span class="sxs-lookup"><span data-stu-id="3ee95-181">An event consumer typically processes a batch of messages in a loop.</span></span> <span data-ttu-id="3ee95-182">Es ist ratsam, Ausnahmen in dieser Verarbeitungsschleife zu verarbeiten, damit kein gesamter Batch mit Nachrichten verloren geht, wenn eine einzelne Nachricht eine Ausnahme verursacht.</span><span class="sxs-lookup"><span data-stu-id="3ee95-182">You should handle exceptions within this processing loop to avoid losing an entire batch of messages if a single message causes an exception.</span></span>

<span data-ttu-id="3ee95-183">**Verwenden Sie eine Warteschlange für unzustellbare Nachrichten.**</span><span class="sxs-lookup"><span data-stu-id="3ee95-183">**Use a dead-letter queue.**</span></span> <span data-ttu-id="3ee95-184">Wenn die Verarbeitung einer Nachricht zu einem nicht vorübergehenden Fehler führt, sollten Sie die Nachricht in eine Warteschlange für unzustellbare Nachrichten einreihen, damit Sie den Status nachverfolgen können.</span><span class="sxs-lookup"><span data-stu-id="3ee95-184">If processing a message results in a non-transient failure, put the message onto a dead-letter queue, so that you can track the status.</span></span> <span data-ttu-id="3ee95-185">Je nach Szenario können Sie versuchen, die Nachricht später noch einmal zu verarbeiten, eine kompensierende Transaktion anzuwenden oder eine andere Aktion durchzuführen.</span><span class="sxs-lookup"><span data-stu-id="3ee95-185">Depending on the scenario, you might retry the message later, apply a compensating transaction, or take some other action.</span></span> <span data-ttu-id="3ee95-186">Beachten Sie, dass Event Hubs nicht über eine integrierte Funktionalität für Warteschlangen für unzustellbare Nachrichten verfügt.</span><span class="sxs-lookup"><span data-stu-id="3ee95-186">Note that Event Hubs does not have any built-in dead-letter queue functionality.</span></span> <span data-ttu-id="3ee95-187">Sie können Azure Queue Storage oder Service Bus verwenden, um eine Warteschlange für unzustellbare Nachrichten zu implementieren, oder Azure Functions oder einen anderen Mechanismus für die Ereignisverarbeitung nutzen.</span><span class="sxs-lookup"><span data-stu-id="3ee95-187">You can use Azure Queue Storage or Service Bus to implement a dead-letter queue, or use Azure Functions or some other eventing mechanism.</span></span>  

<span data-ttu-id="3ee95-188">**Implementieren Sie die Notfallwiederherstellung per Failover zu einem sekundären Event Hubs-Namespace.**</span><span class="sxs-lookup"><span data-stu-id="3ee95-188">**Implement disaster recovery by failing over to a secondary Event Hubs namespace.**</span></span> <span data-ttu-id="3ee95-189">Weitere Informationen finden Sie unter [Georedundante Notfallwiederherstellung in Azure Event Hubs](/azure/event-hubs/event-hubs-geo-dr).</span><span class="sxs-lookup"><span data-stu-id="3ee95-189">For more information, see [Azure Event Hubs Geo-disaster recovery](/azure/event-hubs/event-hubs-geo-dr).</span></span>

## <a name="redis-cache"></a><span data-ttu-id="3ee95-190">Redis-Cache</span><span class="sxs-lookup"><span data-stu-id="3ee95-190">Redis Cache</span></span>

<span data-ttu-id="3ee95-191">**Konfigurieren der Georeplikation.**</span><span class="sxs-lookup"><span data-stu-id="3ee95-191">**Configure Geo-replication**.</span></span> <span data-ttu-id="3ee95-192">Die Georeplikation bietet einen Mechanismus zum Verknüpfen von zwei Azure Redis Cache-Instanzen im Premium-Tarif.</span><span class="sxs-lookup"><span data-stu-id="3ee95-192">Geo-replication provides a mechanism for linking two Premium tier Azure Redis Cache instances.</span></span> <span data-ttu-id="3ee95-193">In den primären Cache geschriebene Daten werden in einen sekundären schreibgeschützten Cache repliziert.</span><span class="sxs-lookup"><span data-stu-id="3ee95-193">Data written to the primary cache is replicated to a secondary read-only cache.</span></span> <span data-ttu-id="3ee95-194">Weitere Informationen finden Sie unter [Konfigurieren der Georeplikation für Azure Redis Cache](/azure/redis-cache/cache-how-to-geo-replication).</span><span class="sxs-lookup"><span data-stu-id="3ee95-194">For more information, see [How to configure Geo-replication for Azure Redis Cache](/azure/redis-cache/cache-how-to-geo-replication)</span></span>

<span data-ttu-id="3ee95-195">**Konfigurieren der Redis-Datenpersistenz.**</span><span class="sxs-lookup"><span data-stu-id="3ee95-195">**Configure data persistence.**</span></span> <span data-ttu-id="3ee95-196">Mithilfe der Redis-Persistenz können Sie die in Redis gespeicherten Daten dauerhaft speichern.</span><span class="sxs-lookup"><span data-stu-id="3ee95-196">Redis persistence allows you to persist data stored in Redis.</span></span> <span data-ttu-id="3ee95-197">Sie können zudem Momentaufnahmen erstellen und die Daten sichern, die Sie dann im Fall eines Hardwarefehlers laden können.</span><span class="sxs-lookup"><span data-stu-id="3ee95-197">You can also take snapshots and back up the data, which you can load in case of a hardware failure.</span></span> <span data-ttu-id="3ee95-198">Weitere Informationen finden Sie unter [Konfigurieren von Datenpersistenz für Azure Redis Cache vom Typ „Premium“](/azure/redis-cache/cache-how-to-premium-persistence).</span><span class="sxs-lookup"><span data-stu-id="3ee95-198">For more information, see [How to configure data persistence for a Premium Azure Redis Cache](/azure/redis-cache/cache-how-to-premium-persistence)</span></span>

<span data-ttu-id="3ee95-199">Wenn Sie Redis Cache als temporären Zwischenspeicher für Daten und nicht als permanenten Speicher verwenden, sind diese Empfehlungen möglicherweise nicht relevant.</span><span class="sxs-lookup"><span data-stu-id="3ee95-199">If you are using Redis Cache as a temporary data cache and not as a persistent store, these recommendations may not apply.</span></span> 

## <a name="search"></a><span data-ttu-id="3ee95-200">Suchen,</span><span class="sxs-lookup"><span data-stu-id="3ee95-200">Search</span></span>

<span data-ttu-id="3ee95-201">**Stellen Sie mehr als ein Replikat bereit.**</span><span class="sxs-lookup"><span data-stu-id="3ee95-201">**Provision more than one replica.**</span></span> <span data-ttu-id="3ee95-202">Verwenden Sie mindestens zwei Replikate für hohe Verfügbarkeit für Lesezugriff oder drei für hohe Verfügbarkeit für Lese-/Schreibzugriff.</span><span class="sxs-lookup"><span data-stu-id="3ee95-202">Use at least two replicas for read high-availability, or three for read-write high-availability.</span></span>

<span data-ttu-id="3ee95-203">**Konfigurieren Sie Indexer für Bereitstellungen in mehreren Regionen.**</span><span class="sxs-lookup"><span data-stu-id="3ee95-203">**Configure indexers for multi-region deployments.**</span></span> <span data-ttu-id="3ee95-204">Für eine Bereitstellung in mehreren Regionen sollten Sie die Optionen für Kontinuität bei der Indizierung in Betracht ziehen.</span><span class="sxs-lookup"><span data-stu-id="3ee95-204">If you have a multi-region deployment, consider your options for continuity in indexing.</span></span>

  * <span data-ttu-id="3ee95-205">Wenn die Datenquelle georepliziert wird, sollten Sie im Allgemeinen die Indexer der einzelnen regionalen Azure Search-Dienste auf das eigene lokale Datenquellenreplikat verweisen.</span><span class="sxs-lookup"><span data-stu-id="3ee95-205">If the data source is geo-replicated, you should generally point each indexer of each regional Azure Search service to its local data source replica.</span></span> <span data-ttu-id="3ee95-206">Dieser Ansatz wird jedoch für große Datasets, die in Azure SQL-Datenbank gespeichert sind, nicht empfohlen.</span><span class="sxs-lookup"><span data-stu-id="3ee95-206">However, that approach is not recommended for large datasets stored in Azure SQL Database.</span></span> <span data-ttu-id="3ee95-207">Der Grund ist, dass Azure Search keine inkrementelle Indizierung für sekundäre SQL-Datenbankreplikate ausführen kann. Dies ist nur für primäre Replikate möglich.</span><span class="sxs-lookup"><span data-stu-id="3ee95-207">The reason is that Azure Search cannot perform incremental indexing from secondary SQL Database replicas, only from primary replicas.</span></span> <span data-ttu-id="3ee95-208">Verweisen Sie stattdessen alle Indexer auf das primäre Replikat.</span><span class="sxs-lookup"><span data-stu-id="3ee95-208">Instead, point all indexers to the primary replica.</span></span> <span data-ttu-id="3ee95-209">Verweisen Sie den Azure Search-Indexer nach einem Failover auf das neue primäre Replikat.</span><span class="sxs-lookup"><span data-stu-id="3ee95-209">After a failover, point the Azure Search indexers at the new primary replica.</span></span>  
  * <span data-ttu-id="3ee95-210">Wenn die Datenquelle nicht georepliziert wird, verweisen Sie mehrere Indexer auf die gleiche Datenquelle, damit Azure Search-Dienste in mehreren Regionen kontinuierlich und unabhängig die Datenquelle indizieren.</span><span class="sxs-lookup"><span data-stu-id="3ee95-210">If the data source is not geo-replicated, point multiple indexers at the same data source, so that Azure Search services in multiple regions continuously and independently index from the data source.</span></span> <span data-ttu-id="3ee95-211">Weitere Informationen finden Sie unter [Überlegungen zur Leistung und Optimierung von Azure Search][search-optimization].</span><span class="sxs-lookup"><span data-stu-id="3ee95-211">For more information, see [Azure Search performance and optimization considerations][search-optimization].</span></span>

## <a name="storage"></a><span data-ttu-id="3ee95-212">Speicher</span><span class="sxs-lookup"><span data-stu-id="3ee95-212">Storage</span></span>

<span data-ttu-id="3ee95-213">**Verwenden Sie für Anwendungsdaten georedundanten Speicher mit Lesezugriff (RA-GRS).**</span><span class="sxs-lookup"><span data-stu-id="3ee95-213">**For application data, use read-access geo-redundant storage (RA-GRS).**</span></span> <span data-ttu-id="3ee95-214">Bei einem RA-GRS-Speicher werden die Daten in eine sekundäre Region repliziert, und er bietet schreibgeschützten Zugriff aus der sekundären Region.</span><span class="sxs-lookup"><span data-stu-id="3ee95-214">RA-GRS storage replicates the data to a secondary region, and provides read-only access from the secondary region.</span></span> <span data-ttu-id="3ee95-215">Wenn in der primären Region der Speicher ausfällt, kann die Anwendung die Daten über die sekundäre Region lesen.</span><span class="sxs-lookup"><span data-stu-id="3ee95-215">If there is a storage outage in the primary region, the application can read the data from the secondary region.</span></span> <span data-ttu-id="3ee95-216">Weitere Informationen finden Sie unter [Azure Storage-Replikation](/azure/storage/storage-redundancy/).</span><span class="sxs-lookup"><span data-stu-id="3ee95-216">For more information, see [Azure Storage replication](/azure/storage/storage-redundancy/).</span></span>

<span data-ttu-id="3ee95-217">**Verwenden Sie Managed Disks für VM-Datenträger.**</span><span class="sxs-lookup"><span data-stu-id="3ee95-217">**For VM disks, use Managed Disks.**</span></span> <span data-ttu-id="3ee95-218">[Managed Disks][managed-disks] ermöglicht eine höhere Zuverlässigkeit für VMs in einer Verfügbarkeitsgruppe, da die Datenträger ausreichend voneinander isoliert sind, um Single Points of Failure zu vermeiden.</span><span class="sxs-lookup"><span data-stu-id="3ee95-218">[Managed Disks][managed-disks] provide better reliability for VMs in an availability set, because the disks are sufficiently isolated from each other to avoid single points of failure.</span></span> <span data-ttu-id="3ee95-219">Zudem gelten für Managed Disks keine IOPS-Grenzwerte von VHDs, die in einem Speicherkonto erstellt wurden.</span><span class="sxs-lookup"><span data-stu-id="3ee95-219">Also, Managed Disks aren't subject to the IOPS limits of VHDs created in a storage account.</span></span> <span data-ttu-id="3ee95-220">Weitere Informationen finden Sie unter [Verwalten der Verfügbarkeit virtueller Windows-Computer in Azure][vm-manage-availability].</span><span class="sxs-lookup"><span data-stu-id="3ee95-220">For more information, see [Manage the availability of Windows virtual machines in Azure][vm-manage-availability].</span></span>

<span data-ttu-id="3ee95-221">**Erstellen Sie für Queue Storage eine Sicherungswarteschlange in einer anderen Region.**</span><span class="sxs-lookup"><span data-stu-id="3ee95-221">**For Queue storage, create a backup queue in another region.**</span></span> <span data-ttu-id="3ee95-222">Für Queue Storage hat ein schreibgeschütztes Replikat eingeschränkten Nutzen, da Sie Elemente nicht in die Warteschlange aufnehmen oder daraus entfernen können.</span><span class="sxs-lookup"><span data-stu-id="3ee95-222">For Queue storage, a read-only replica has limited use, because you can't queue or dequeue items.</span></span> <span data-ttu-id="3ee95-223">Erstellen Sie stattdessen eine Sicherungswarteschlange in einem Speicherkonto in einer anderen Region.</span><span class="sxs-lookup"><span data-stu-id="3ee95-223">Instead, create a backup queue in a storage account in another region.</span></span> <span data-ttu-id="3ee95-224">Bei einem Speicherausfall kann die Anwendung die Sicherungswarteschlange verwenden, bis die primäre Region wieder verfügbar ist.</span><span class="sxs-lookup"><span data-stu-id="3ee95-224">If there is a storage outage, the application can use the backup queue, until the primary region becomes available again.</span></span> <span data-ttu-id="3ee95-225">Auf diese Weise kann die Anwendung weiterhin neue Anforderungen verarbeiten.</span><span class="sxs-lookup"><span data-stu-id="3ee95-225">That way, the application can still process new requests.</span></span>  

## <a name="sql-database"></a><span data-ttu-id="3ee95-226">SQL-Datenbank</span><span class="sxs-lookup"><span data-stu-id="3ee95-226">SQL Database</span></span>

<span data-ttu-id="3ee95-227">**Verwenden Sie den Standard- oder Premium-Tarif.**</span><span class="sxs-lookup"><span data-stu-id="3ee95-227">**Use Standard or Premium tier.**</span></span> <span data-ttu-id="3ee95-228">Diese Tarife bieten einen längeren Zeitraum für die Point-in-Time-Wiederherstellung (35 Tage).</span><span class="sxs-lookup"><span data-stu-id="3ee95-228">These tiers provide a longer point-in-time restore period (35 days).</span></span> <span data-ttu-id="3ee95-229">Weitere Informationen finden Sie unter [SQL-Datenbankoptionen und -leistung](/azure/sql-database/sql-database-service-tiers/).</span><span class="sxs-lookup"><span data-stu-id="3ee95-229">For more information, see [SQL Database options and performance](/azure/sql-database/sql-database-service-tiers/).</span></span>

<span data-ttu-id="3ee95-230">**Aktivieren Sie die SQL-Datenbanküberwachung.**</span><span class="sxs-lookup"><span data-stu-id="3ee95-230">**Enable SQL Database auditing.**</span></span> <span data-ttu-id="3ee95-231">Die Überwachung kann verwendet werden, um böswillige Angriffe oder Benutzerfehler zu diagnostizieren.</span><span class="sxs-lookup"><span data-stu-id="3ee95-231">Auditing can be used to diagnose malicious attacks or human error.</span></span> <span data-ttu-id="3ee95-232">Weitere Informationen finden Sie unter [Erste Schritte mit der SQL-Datenbanküberwachung](/azure/sql-database/sql-database-auditing-get-started/).</span><span class="sxs-lookup"><span data-stu-id="3ee95-232">For more information, see [Get started with SQL database auditing](/azure/sql-database/sql-database-auditing-get-started/).</span></span>

<span data-ttu-id="3ee95-233">**Verwenden Sie die aktive Georeplikation**, um ein lesbares sekundäres Replikat in einer anderen Region zu erstellen.</span><span class="sxs-lookup"><span data-stu-id="3ee95-233">**Use Active Geo-Replication** Use Active Geo-Replication to create a readable secondary in a different region.</span></span>  <span data-ttu-id="3ee95-234">Falls Ihre primäre Datenbank ausfällt oder einfach offline geschaltet werden muss, können Sie ein manuelles Failover auf die sekundäre Datenbank ausführen.</span><span class="sxs-lookup"><span data-stu-id="3ee95-234">If your primary database fails, or simply needs to be taken offline, perform a manual failover to the secondary database.</span></span>  <span data-ttu-id="3ee95-235">Bis Sie ein Failover ausführen, bleibt die sekundäre Datenbank schreibgeschützt.</span><span class="sxs-lookup"><span data-stu-id="3ee95-235">Until you fail over, the secondary database remains read-only.</span></span>  <span data-ttu-id="3ee95-236">Weitere Informationen finden Sie unter [Aktive Georeplikation in Azure SQL-Datenbank](/azure/sql-database/sql-database-geo-replication-overview/).</span><span class="sxs-lookup"><span data-stu-id="3ee95-236">For more information, see [SQL Database Active Geo-Replication](/azure/sql-database/sql-database-geo-replication-overview/).</span></span>

<span data-ttu-id="3ee95-237">**Verwenden Sie Sharding.**</span><span class="sxs-lookup"><span data-stu-id="3ee95-237">**Use sharding.**</span></span> <span data-ttu-id="3ee95-238">Erwägen Sie die Verwendung von Sharding, um die Datenbank horizontal zu partitionieren.</span><span class="sxs-lookup"><span data-stu-id="3ee95-238">Consider using sharding to partition the database horizontally.</span></span> <span data-ttu-id="3ee95-239">Sharding kann Fehlerisolation bereitstellen.</span><span class="sxs-lookup"><span data-stu-id="3ee95-239">Sharding can provide fault isolation.</span></span> <span data-ttu-id="3ee95-240">Weitere Informationen finden Sie unter [Horizontales Hochskalieren mit Azure SQL-Datenbank](/azure/sql-database/sql-database-elastic-scale-introduction/).</span><span class="sxs-lookup"><span data-stu-id="3ee95-240">For more information, see [Scaling out with Azure SQL Database](/azure/sql-database/sql-database-elastic-scale-introduction/).</span></span>

<span data-ttu-id="3ee95-241">**Verwenden Sie die Point-in-Time-Wiederherstellung für eine Wiederherstellung nach einem menschlichen Fehler.**</span><span class="sxs-lookup"><span data-stu-id="3ee95-241">**Use point-in-time restore to recover from human error.**</span></span>  <span data-ttu-id="3ee95-242">Mit der Point-in-Time-Wiederherstellung wird Ihre Datenbank zu einem früheren Zeitpunkt wiederhergestellt.</span><span class="sxs-lookup"><span data-stu-id="3ee95-242">Point-in-time restore returns your database to an earlier point in time.</span></span> <span data-ttu-id="3ee95-243">Weitere Informationen finden Sie unter [Wiederherstellen einer Azure SQL-Datenbank mit automatisierten Datenbanksicherungen][sql-restore].</span><span class="sxs-lookup"><span data-stu-id="3ee95-243">For more information, see [Recover an Azure SQL database using automated database backups][sql-restore].</span></span>

<span data-ttu-id="3ee95-244">**Verwenden Sie die Geowiederherstellung für die Wiederherstellung nach einem Dienstausfall.**</span><span class="sxs-lookup"><span data-stu-id="3ee95-244">**Use geo-restore to recover from a service outage.**</span></span> <span data-ttu-id="3ee95-245">Mit der Geowiederherstellung wird eine Datenbank auf der Basis einer georedundanten Sicherung wiederhergestellt.</span><span class="sxs-lookup"><span data-stu-id="3ee95-245">Geo-restore restores a database from a geo-redundant backup.</span></span>  <span data-ttu-id="3ee95-246">Weitere Informationen finden Sie unter [Wiederherstellen einer Azure SQL-Datenbank mit automatisierten Datenbanksicherungen][sql-restore].</span><span class="sxs-lookup"><span data-stu-id="3ee95-246">For more information, see [Recover an Azure SQL database using automated database backups][sql-restore].</span></span>

## <a name="sql-server-running-in-a-vm"></a><span data-ttu-id="3ee95-247">SQL Server auf einem virtuellen Computer</span><span class="sxs-lookup"><span data-stu-id="3ee95-247">SQL Server running in a VM</span></span>

<span data-ttu-id="3ee95-248">**Replizieren Sie die Datenbank.**</span><span class="sxs-lookup"><span data-stu-id="3ee95-248">**Replicate the database.**</span></span> <span data-ttu-id="3ee95-249">Verwenden Sie SQL Server AlwaysOn-Verfügbarkeitsgruppen, um die Datenbank zu replizieren.</span><span class="sxs-lookup"><span data-stu-id="3ee95-249">Use SQL Server Always On Availability Groups to replicate the database.</span></span> <span data-ttu-id="3ee95-250">Dadurch erreichen Sie hohe Verfügbarkeit, wenn eine SQL Server-Instanz ausfällt.</span><span class="sxs-lookup"><span data-stu-id="3ee95-250">Provides high availability if one SQL Server instance fails.</span></span> <span data-ttu-id="3ee95-251">Weitere Informationen finden Sie unter [Ausführen von Windows-VMs für eine n-schichtige Anwendung](../reference-architectures/virtual-machines-windows/n-tier.md).</span><span class="sxs-lookup"><span data-stu-id="3ee95-251">For more information, see [Run Windows VMs for an N-tier application](../reference-architectures/virtual-machines-windows/n-tier.md)</span></span>

<span data-ttu-id="3ee95-252">**Sichern Sie die Datenbank**.</span><span class="sxs-lookup"><span data-stu-id="3ee95-252">**Back up the database**.</span></span> <span data-ttu-id="3ee95-253">Wenn Sie bereits [Azure Backup](https://azure.microsoft.com/documentation/services/backup/) zum Sichern Ihrer VMs verwenden, erwägen Sie die Nutzung von [Azure Backup für SQL Server-Workloads mit DPM](/azure/backup/backup-azure-backup-sql/).</span><span class="sxs-lookup"><span data-stu-id="3ee95-253">If you are already using [Azure Backup](https://azure.microsoft.com/documentation/services/backup/) to back up your VMs, consider using [Azure Backup for SQL Server workloads using DPM](/azure/backup/backup-azure-backup-sql/).</span></span> <span data-ttu-id="3ee95-254">Bei dieser Vorgehensweise gibt es eine Sicherungsadministratorrolle für die Organisation und ein einheitliches Wiederherstellungsverfahren für VMs und SQL Server.</span><span class="sxs-lookup"><span data-stu-id="3ee95-254">With this approach, there is one backup administrator role for the organization and a unified recovery procedure for VMs and SQL Server.</span></span> <span data-ttu-id="3ee95-255">Verwenden Sie andernfalls die [verwaltete SQL Server-Sicherung in Microsoft Azure](https://msdn.microsoft.com/library/dn449496.aspx).</span><span class="sxs-lookup"><span data-stu-id="3ee95-255">Otherwise, use [SQL Server Managed Backup to Microsoft Azure](https://msdn.microsoft.com/library/dn449496.aspx).</span></span>

## <a name="traffic-manager"></a><span data-ttu-id="3ee95-256">Traffic Manager</span><span class="sxs-lookup"><span data-stu-id="3ee95-256">Traffic Manager</span></span>

<span data-ttu-id="3ee95-257">**Führen Sie manuelle Failbacks aus.**</span><span class="sxs-lookup"><span data-stu-id="3ee95-257">**Perform manual failback.**</span></span> <span data-ttu-id="3ee95-258">Führen Sie nach einem Traffic Manager-Failover ein manuelles Failback und kein automatische Failback aus.</span><span class="sxs-lookup"><span data-stu-id="3ee95-258">After a Traffic Manager failover, perform manual failback, rather than automatically failing back.</span></span> <span data-ttu-id="3ee95-259">Überprüfen Sie vor einem Failback, ob alle Subsysteme der Anwendung fehlerfrei sind.</span><span class="sxs-lookup"><span data-stu-id="3ee95-259">Before failing back, verify that all application subsystems are healthy.</span></span>  <span data-ttu-id="3ee95-260">Andernfalls könnte eine Situation eintreten, bei der die Anwendung zwischen den Rechenzentren hin und her wechselt.</span><span class="sxs-lookup"><span data-stu-id="3ee95-260">Otherwise, you can create a situation where the application flips back and forth between data centers.</span></span> <span data-ttu-id="3ee95-261">Weitere Informationen finden Sie unter [Ausführen von VMs in mehreren Regionen für Hochverfügbarkeit](../reference-architectures/virtual-machines-windows/multi-region-application.md).</span><span class="sxs-lookup"><span data-stu-id="3ee95-261">For more information, see [Run VMs in multiple regions for high availability](../reference-architectures/virtual-machines-windows/multi-region-application.md).</span></span>

<span data-ttu-id="3ee95-262">**Erstellen Sie einen Endpunkt für Integritätstests.**</span><span class="sxs-lookup"><span data-stu-id="3ee95-262">**Create a health probe endpoint.**</span></span> <span data-ttu-id="3ee95-263">Erstellen Sie einen benutzerdefinierten Endpunkt, der die Gesamtintegrität der Anwendung angibt.</span><span class="sxs-lookup"><span data-stu-id="3ee95-263">Create a custom endpoint that reports on the overall health of the application.</span></span> <span data-ttu-id="3ee95-264">Dies ermöglicht Traffic Manager, ein Failover auszuführen, wenn ein kritischer Pfad und nicht nur das Front-End ausfällt.</span><span class="sxs-lookup"><span data-stu-id="3ee95-264">This enables Traffic Manager to fail over if any critical path fails, not just the front end.</span></span> <span data-ttu-id="3ee95-265">Der Endpunkt sollte einen HTTP-Fehlercode zurückgeben, wenn eine kritische Abhängigkeit fehlerhaft oder nicht erreichbar ist.</span><span class="sxs-lookup"><span data-stu-id="3ee95-265">The endpoint should return an HTTP error code if any critical dependency is unhealthy or unreachable.</span></span> <span data-ttu-id="3ee95-266">Melden Sie jedoch keine Fehler für nicht kritische Dienste.</span><span class="sxs-lookup"><span data-stu-id="3ee95-266">Don't report errors for non-critical services, however.</span></span> <span data-ttu-id="3ee95-267">Andernfalls könnte der Integritätstest ein Failover auslösen, wenn es nicht erforderlich ist, und falsch positive Ergebnisse erstellen.</span><span class="sxs-lookup"><span data-stu-id="3ee95-267">Otherwise, the health probe might trigger failover when it's not needed, creating false positives.</span></span> <span data-ttu-id="3ee95-268">Weitere Informationen finden Sie unter [Traffic Manager-Endpunktüberwachung und -failover](/azure/traffic-manager/traffic-manager-monitoring/).</span><span class="sxs-lookup"><span data-stu-id="3ee95-268">For more information, see [Traffic Manager endpoint monitoring and failover](/azure/traffic-manager/traffic-manager-monitoring/).</span></span>

## <a name="virtual-machines"></a><span data-ttu-id="3ee95-269">Virtual Machines</span><span class="sxs-lookup"><span data-stu-id="3ee95-269">Virtual Machines</span></span>

<span data-ttu-id="3ee95-270">**Vermeiden Sie es, eine Produktionsworkload auf einer einzigen VM auszuführen.**</span><span class="sxs-lookup"><span data-stu-id="3ee95-270">**Avoid running a production workload on a single VM.**</span></span> <span data-ttu-id="3ee95-271">Die Bereitstellung einer einzigen VM ist bei geplanten oder ungeplanten Wartungen nicht zuverlässig.</span><span class="sxs-lookup"><span data-stu-id="3ee95-271">A single VM deployment is not resilient to planned or unplanned maintenance.</span></span> <span data-ttu-id="3ee95-272">Nehmen Sie stattdessen mehrere VMs in eine Verfügbarkeitsgruppe oder eine [VM-Skalierungsgruppe](/azure/virtual-machine-scale-sets/virtual-machine-scale-sets-overview/) auf, der sie einen Lastenausgleich vorschalten.</span><span class="sxs-lookup"><span data-stu-id="3ee95-272">Instead, put multiple VMs in an availability set or [VM scale set](/azure/virtual-machine-scale-sets/virtual-machine-scale-sets-overview/), with a load balancer in front.</span></span>

<span data-ttu-id="3ee95-273">**Geben Sie bei der Bereitstellung der VM eine Verfügbarkeitsgruppe an.**</span><span class="sxs-lookup"><span data-stu-id="3ee95-273">**Specify an availability set when you provision the VM.**</span></span> <span data-ttu-id="3ee95-274">Derzeit gibt es keine Möglichkeit, einer Verfügbarkeitsgruppe nach dem Bereitstellen der VM eine VM hinzuzufügen.</span><span class="sxs-lookup"><span data-stu-id="3ee95-274">Currently, there is no way to add a VM to an availability set after the VM is provisioned.</span></span> <span data-ttu-id="3ee95-275">Sie müssen beim Hinzufügen einer neuen VM zu einer vorhandenen Verfügbarkeitsgruppe eine NIC für die VM erstellen und die NIC dem Back-End-Adresspool des Lastenausgleichs hinzufügen.</span><span class="sxs-lookup"><span data-stu-id="3ee95-275">When you add a new VM to an existing availability set, make sure to create a NIC for the VM, and add the NIC to the back-end address pool on the load balancer.</span></span> <span data-ttu-id="3ee95-276">Andernfalls leitet der Lastenausgleich den Netzwerkdatenverkehr nicht an die VM weiter.</span><span class="sxs-lookup"><span data-stu-id="3ee95-276">Otherwise, the load balancer won't route network traffic to that VM.</span></span>

<span data-ttu-id="3ee95-277">**Nehmen Sie jede Logikschicht in eine separate Verfügbarkeitsgruppe auf.**</span><span class="sxs-lookup"><span data-stu-id="3ee95-277">**Put each application tier into a separate Availability Set.**</span></span> <span data-ttu-id="3ee95-278">Fügen Sie in einer Anwendung mit n-Schichten VMs aus verschiedenen Schichten nicht in die gleiche Verfügbarkeitsgruppe ein.</span><span class="sxs-lookup"><span data-stu-id="3ee95-278">In an N-tier application, don't put VMs from different tiers into the same availability set.</span></span> <span data-ttu-id="3ee95-279">VMs in einer Verfügbarkeitsgruppe werden über Fehlerdomänen (FDs) und Updatedomänen (UD) verteilt.</span><span class="sxs-lookup"><span data-stu-id="3ee95-279">VMs in an availability set are placed across fault domains (FDs) and update domains (UD).</span></span> <span data-ttu-id="3ee95-280">Um den Redundanzvorteil von FDs und UDs nutzen zu können, muss jedoch jede VM in der Verfügbarkeitsgruppe die gleichen Clientanforderungen verarbeiten können.</span><span class="sxs-lookup"><span data-stu-id="3ee95-280">However, to get the redundancy benefit of FDs and UDs, every VM in the availability set must be able to handle the same client requests.</span></span>

<span data-ttu-id="3ee95-281">**Wählen Sie die richtige VM-Größe basierend auf den Leistungsanforderungen aus.**</span><span class="sxs-lookup"><span data-stu-id="3ee95-281">**Choose the right VM size based on performance requirements.**</span></span> <span data-ttu-id="3ee95-282">Beginnen Sie beim Verlagern einer vorhandenen Workload in Azure mit der VM-Größe, die Ihren lokalen Servern am ehesten entspricht.</span><span class="sxs-lookup"><span data-stu-id="3ee95-282">When moving an existing workload to Azure, start with the VM size that's the closest match to your on-premises servers.</span></span> <span data-ttu-id="3ee95-283">Messen Sie dann die Leistung Ihrer tatsächlichen Workload hinsichtlich CPU, Arbeitsspeicher und Datenträger-IOPS, und passen Sie die Größe bei Bedarf an.</span><span class="sxs-lookup"><span data-stu-id="3ee95-283">Then measure the performance of your actual workload with respect to CPU, memory, and disk IOPS, and adjust the size if needed.</span></span> <span data-ttu-id="3ee95-284">Dadurch wird sichergestellt, dass sich die Anwendung in einer Cloudumgebung wie erwartet verhält.</span><span class="sxs-lookup"><span data-stu-id="3ee95-284">This helps to ensure the application behaves as expected in a cloud environment.</span></span> <span data-ttu-id="3ee95-285">Wenn Sie mehrere NICs benötigen, beachten Sie zudem den NIC-Grenzwert für jede Größe.</span><span class="sxs-lookup"><span data-stu-id="3ee95-285">Also, if you need multiple NICs, be aware of the NIC limit for each size.</span></span>

<span data-ttu-id="3ee95-286">**Verwenden Sie Managed Disks für VHDs.**</span><span class="sxs-lookup"><span data-stu-id="3ee95-286">**Use Managed Disks for VHDs.**</span></span> <span data-ttu-id="3ee95-287">[Managed Disks][managed-disks] ermöglicht eine höhere Zuverlässigkeit für VMs in einer Verfügbarkeitsgruppe, da die Datenträger ausreichend voneinander isoliert sind, um Single Points of Failure zu vermeiden.</span><span class="sxs-lookup"><span data-stu-id="3ee95-287">[Managed Disks][managed-disks] provide better reliability for VMs in an availability set, because the disks are sufficiently isolated from each other to avoid single points of failure.</span></span> <span data-ttu-id="3ee95-288">Zudem gelten für Managed Disks keine IOPS-Grenzwerte von VHDs, die in einem Speicherkonto erstellt wurden.</span><span class="sxs-lookup"><span data-stu-id="3ee95-288">Also, Managed Disks aren't subject to the IOPS limits of VHDs created in a storage account.</span></span> <span data-ttu-id="3ee95-289">Weitere Informationen finden Sie unter [Verwalten der Verfügbarkeit virtueller Windows-Computer in Azure][vm-manage-availability].</span><span class="sxs-lookup"><span data-stu-id="3ee95-289">For more information, see [Manage the availability of Windows virtual machines in Azure][vm-manage-availability].</span></span>

<span data-ttu-id="3ee95-290">**Installieren Sie Anwendungen auf einem Datenträger für Daten und nicht auf dem Datenträger für das Betriebssystem.**</span><span class="sxs-lookup"><span data-stu-id="3ee95-290">**Install applications on a data disk, not the OS disk.**</span></span> <span data-ttu-id="3ee95-291">Andernfalls kann der Grenzwert für die Datenträgergröße erreicht werden.</span><span class="sxs-lookup"><span data-stu-id="3ee95-291">Otherwise, you may reach the disk size limit.</span></span>

<span data-ttu-id="3ee95-292">**Verwenden Sie Azure Backup zum Sichern von VMs.**</span><span class="sxs-lookup"><span data-stu-id="3ee95-292">**Use Azure Backup to back up VMs.**</span></span> <span data-ttu-id="3ee95-293">Sicherungen schützen vor versehentlichen Datenverlusten.</span><span class="sxs-lookup"><span data-stu-id="3ee95-293">Backups protect against accidental data loss.</span></span> <span data-ttu-id="3ee95-294">Weitere Informationen finden Sie unter [Schützen von Azure-VMs mit einem Recovery Services-Tresor](/azure/backup/backup-azure-vms-first-look-arm/).</span><span class="sxs-lookup"><span data-stu-id="3ee95-294">For more information, see [Protect Azure VMs with a recovery services vault](/azure/backup/backup-azure-vms-first-look-arm/).</span></span>

<span data-ttu-id="3ee95-295">**Aktivieren Sie Diagnoseprotokolle**, z.B. grundlegende Integritätsmetriken, Infrastrukturprotokolle und die [Startdiagnose][boot-diagnostics].</span><span class="sxs-lookup"><span data-stu-id="3ee95-295">**Enable diagnostic logs**, including basic health metrics, infrastructure logs, and [boot diagnostics][boot-diagnostics].</span></span> <span data-ttu-id="3ee95-296">Startdiagnosen dienen dazu, einen Fehler beim Startvorgang zu untersuchen, wenn sich Ihre VM in einem nicht startfähigen Zustand befindet.</span><span class="sxs-lookup"><span data-stu-id="3ee95-296">Boot diagnostics can help you diagnose a boot failure if your VM gets into a non-bootable state.</span></span> <span data-ttu-id="3ee95-297">Weitere Informationen finden Sie unter [Übersicht über Azure-Diagnoseprotokolle][diagnostics-logs].</span><span class="sxs-lookup"><span data-stu-id="3ee95-297">For more information, see [Overview of Azure Diagnostic Logs][diagnostics-logs].</span></span>

<span data-ttu-id="3ee95-298">**Verwenden Sie die AzureLogCollector-Erweiterung.**</span><span class="sxs-lookup"><span data-stu-id="3ee95-298">**Use the AzureLogCollector extension.**</span></span> <span data-ttu-id="3ee95-299">(Nur Windows-VMs.) Diese Erweiterung aggregiert Azure Platform-Protokolle und lädt sie in Azure-Speicher hoch, ohne dass eine Remoteanmeldung des Operators auf der VM erforderlich ist.</span><span class="sxs-lookup"><span data-stu-id="3ee95-299">(Windows VMs only.) This extension aggregates Azure platform logs and uploads them to Azure storage, without the operator remotely logging into the VM.</span></span> <span data-ttu-id="3ee95-300">Weitere Informationen finden Sie unter [AzureLogCollector-Erweiterung](/azure/virtual-machines/virtual-machines-windows-log-collector-extension/?toc=%2fazure%2fvirtual-machines%2fwindows%2ftoc.json).</span><span class="sxs-lookup"><span data-stu-id="3ee95-300">For more information, see [AzureLogCollector Extension](/azure/virtual-machines/virtual-machines-windows-log-collector-extension/?toc=%2fazure%2fvirtual-machines%2fwindows%2ftoc.json).</span></span>

## <a name="virtual-network"></a><span data-ttu-id="3ee95-301">Virtuelles Netzwerk</span><span class="sxs-lookup"><span data-stu-id="3ee95-301">Virtual Network</span></span>

<span data-ttu-id="3ee95-302">**Um öffentliche IP-Adressen einer Whitelist hinzuzufügen oder zu sperren, fügen Sie dem Subnetz eine NSG hinzu.**</span><span class="sxs-lookup"><span data-stu-id="3ee95-302">**To whitelist or block public IP addresses, add an NSG to the subnet.**</span></span> <span data-ttu-id="3ee95-303">Blockieren Sie den Zugriff von böswilligen Benutzern, oder lassen Sie nur Benutzer, die über Zugriffsberechtigungen verfügen, auf die Anwendung zugreifen.</span><span class="sxs-lookup"><span data-stu-id="3ee95-303">Block access from malicious users, or allow access only from users who have privilege to access the application.</span></span>  

<span data-ttu-id="3ee95-304">**Erstellen Sie einen benutzerdefinierten Integritätstest.**</span><span class="sxs-lookup"><span data-stu-id="3ee95-304">**Create a custom health probe.**</span></span> <span data-ttu-id="3ee95-305">Integritätstests durch den Lastenausgleich können für HTTP oder TCP durchgeführt werden.</span><span class="sxs-lookup"><span data-stu-id="3ee95-305">Load Balancer Health Probes can test either HTTP or TCP.</span></span> <span data-ttu-id="3ee95-306">Wenn eine VM auf einem HTTP-Server ausgeführt wird, ist der HTTP-Test ein besserer Indikator für den Integritätsstatus als ein TCP-Test.</span><span class="sxs-lookup"><span data-stu-id="3ee95-306">If a VM runs an HTTP server, the HTTP probe is a better indicator of health status than a TCP probe.</span></span> <span data-ttu-id="3ee95-307">Verwenden Sie für einen HTTP-Test einen benutzerdefinierten Endpunkt, der die Gesamtintegrität der Anwendung meldet, einschließlich aller kritischen Abhängigkeiten.</span><span class="sxs-lookup"><span data-stu-id="3ee95-307">For an HTTP probe, use a custom endpoint that reports the overall health of the application, including all critical dependencies.</span></span> <span data-ttu-id="3ee95-308">Weitere Informationen finden Sie unter [Übersicht über Azure Load Balancer](/azure/load-balancer/load-balancer-overview/).</span><span class="sxs-lookup"><span data-stu-id="3ee95-308">For more information, see [Azure Load Balancer overview](/azure/load-balancer/load-balancer-overview/).</span></span>

<span data-ttu-id="3ee95-309">**Blockieren Sie den Integritätstest nicht.**</span><span class="sxs-lookup"><span data-stu-id="3ee95-309">**Don't block the health probe.**</span></span> <span data-ttu-id="3ee95-310">Der Integritätstests durch den Lastenausgleich wird von einer bekannten IP-Adresse (168.63.129.16) gesendet.</span><span class="sxs-lookup"><span data-stu-id="3ee95-310">The Load Balancer Health probe is sent from a known IP address, 168.63.129.16.</span></span> <span data-ttu-id="3ee95-311">Blockieren Sie den Datenverkehr zu oder von dieser IP-Adresse nicht in Firewallrichtlinien oder in NSG-Regeln (Netzwerksicherheitsgruppe).</span><span class="sxs-lookup"><span data-stu-id="3ee95-311">Don't block traffic to or from this IP in any firewall policies or network security group (NSG) rules.</span></span> <span data-ttu-id="3ee95-312">Wenn der Integritätstest blockiert wird, wird die VM vom Lastenausgleich aus der Rotation entfernt.</span><span class="sxs-lookup"><span data-stu-id="3ee95-312">Blocking the health probe would cause the load balancer to remove the VM from rotation.</span></span>

<span data-ttu-id="3ee95-313">**Aktivieren Sie die Protokollierung für den Lastenausgleich.**</span><span class="sxs-lookup"><span data-stu-id="3ee95-313">**Enable Load Balancer logging.**</span></span> <span data-ttu-id="3ee95-314">Die Protokolle zeigen, wie viele VMs am Back-End aufgrund fehlerhafter Testantworten keinen Netzwerkdatenverkehr empfangen.</span><span class="sxs-lookup"><span data-stu-id="3ee95-314">The logs show how many VMs on the back-end are not receiving network traffic due to failed probe responses.</span></span> <span data-ttu-id="3ee95-315">Weitere Informationen finden Sie unter [Protokollanalysen für Azure Load Balancer](/azure/load-balancer/load-balancer-monitor-log/).</span><span class="sxs-lookup"><span data-stu-id="3ee95-315">For more information, see [Log analytics for Azure Load Balancer](/azure/load-balancer/load-balancer-monitor-log/).</span></span>

<!-- links -->
[boot-diagnostics]: https://azure.microsoft.com/blog/boot-diagnostics-for-virtual-machines-v2/
[diagnostics-logs]: /azure/monitoring-and-diagnostics/monitoring-overview-of-diagnostic-logs/
[managed-disks]: /azure/storage/storage-managed-disks-overview
[search-optimization]: /azure/search/search-performance-optimization/
[sql-backup]: /azure/sql-database/sql-database-automated-backups/
[sql-restore]: /azure/sql-database/sql-database-recovery-using-backups/
[vm-manage-availability]: /azure/virtual-machines/windows/manage-availability#use-managed-disks-for-vms-in-an-availability-set
